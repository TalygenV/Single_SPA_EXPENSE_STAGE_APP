(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Expense"],{"0e25":function(e,t,a){var s=a("cc50");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("499e").default;i("7fceb678",s,!0,{sourceMap:!1,shadowMode:!1})},"20bd":function(e,t,a){var s=a("24fb");t=s(!1),t.push([e.i,".__bar-is-horizontal,.__bar-is-vertical{background:rgb(146 146 146)!important}",""]),e.exports=t},4758:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("tg-list",{attrs:{listType:["List"],IsShowAction:!0,ModuleName:"ExpenseApproval",SubModuleCode:"ExpenseApproval",IdentityColumn:"EXPENSEID",showCheckBox:!0,HeaderText:e.$t("ExpenseApproval"),ListData:e.ExpenseApprovalData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,SortExp:e.SortExp,SortBy:e.SortBy,LegendArray:e.LegendArray,NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(t){var s=t.data;return["Status"==s.column.COLUMN_NAME?[a("a",{staticClass:"inactive-disabled"},["SentForCorrection"!=s.row.Status?a("span",{class:e.getStatusClass(s.row.Status,"Status")},[e._v(" "+e._s(s.row[s.column.COLUMN_NAME])+" ")]):e._e(),"SentForCorrection"==s.row.Status?a("span",{class:e.getStatusClass(s.row.Status,"Status")},[e._v(" "+e._s(e.$t("SentForCorrection"))+" ")]):e._e()])]:e._e(),"Amount"==s.column.COLUMN_NAME?[e._v(" "+e._s(e.convertDecimalValueInFormat(s.row.Amount)+" "+s.row.ISO_CODE)+" ")]:e._e()]}}])}),e.showCommentModal?a("ExpenseComments",{attrs:{access:e.access,expenseid:e.expid,CommentHeader:e.CommentHeader,isSingleCommentforMultipleExpenses:e.isSingleCommentforMultipleExpenses,statuscode:e.statuscode,visibility:e.visibility},on:{CloseExpenseComments:function(t){return e.CloseExpenseComments()},fetchdata:function(t){return e.fetchdata()}}}):e._e(),e.showApproverStatusModal?a("ExpenseApproverStatus",{attrs:{expenseid:e.expid},on:{CloseExpenseApproverStatus:function(t){return e.CloseExpenseApproverStatus()}}}):e._e(),e.showFileModal?a("ExpenseAttachents",{attrs:{expenseid:e.expid,code:e.statuscode},on:{CloseExpenseAttachments:e.CloseExpenseAttachments}}):e._e()],1)},i=[],n=(a("5319"),a("9769"));let o=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Approve",iconClass:"fa fa-check",callbackfunction:"SendForApprovalApprove",additionalClass:"",isdisabled:!0,isvisible:!0,id:"SendForApprove"},{title:"Reject",iconClass:"fa fa-close",callbackfunction:"SendForApprovalReject",additionalClass:"",isdisabled:!0,isvisible:!0,id:"SendForReject"},{title:"View History",iconClass:"fa fa-history",callbackfunction:"ViewHistory",additionalClass:"",isdisabled:!1,isvisible:!0,id:"ViewHistory"}],r=[{fieldName:"DATE",fieldType:"date-range",fieldIcon:"fa-calendar",paramName:"dateFrom",fieldSearchConditionName:["expense_date|expense_date"],isSearch:!1,datePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:!1,maxDate:!1,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:!1,maxDate:!1,widgetPositioning:{horizontal:"right",vertical:"bottom"}},value:"",secondValue:"",listOptions:[]},{fieldName:"Project",fieldType:"ddl-check",fieldIcon:"fa-file",paramName:"projectId",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"User",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",paramName:"userId",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Show Data",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",paramName:"showData",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[{value:"My Approvals",name:"My Approvals"},{value:"All Approvals",name:"All Approvals"}]}],l=[{title:"View Attched Files",href:"javascript:void(0)",icon:"fa fa-download",additionalSpan:"",callbackfunction:"downloadAttachment"},{title:"Comments",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-comment",additionalSpan:""},{title:"Send For Correction",callbackfunction:"SendForCorrection",href:"javascript:void(0)",icon:"fa fa-send-o",additionalSpan:""},{title:"Approver Status",callbackfunction:"ApproverStatus",href:"javascript:void(0)",icon:"fa fa-eye",additionalSpan:""}];function c(e,t,a,s){var i=e;let o={};o["type"]=t,o["IsEncrptedId"]=a,o["moduleName"]=s,"Project"==t&&n["a"].ExpenseGetProjectListing(o).then((function(e){var t=e.data;if(null!=t)return t.forEach((function(e,t){let a={name:e.name,value:""+e.value};i.leftSearchFields[1].listOptions.push(a)})),i.$parent.ExpenseGetProjectList=t})),"User"==t&&n["a"].ExpenseGetUserListing(o).then((function(e){var t=e.data;if(null!=t)return t.forEach((function(e,t){let a={name:e.name,value:""+e.value};i.leftSearchFields[2].listOptions.push(a)})),i.$parent.ExpenseGetUserList=t}))}var d={buttons:o,leftsearchSchema:r,listActions:l,bindleftCommonSearchdropdown:c},p=a("9d1d"),u=a("5333"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("ApproverStatus"))+" ")]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.CloseExpenseApproverStatus(e.event)}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[e.noRecordForTab?e._e():a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table dt-responsive nowrap mt-0",attrs:{id:"table-openactivities-content"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[a("span",[e._v(e._s(e.$t("ApprovalGroupName")))])]),a("th",[a("span",[e._v(e._s(e.$t("Header_User")))])]),a("th",[a("span",[e._v(e._s(e.$t("Status")))])])])]),a("tbody",e._l(e.ExpenseApproverStatusData,(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(t.APPROVAL_GROUP_NAME))]),a("td",[e._v(e._s(t.USERS))]),a("td",[e._v(e._s(t.STATUS))])])})),0)])]),e.noRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border no-record"},[e._v(e._s(e.$t("NoRecordfound")))]):e._e()])])])])],1)},h=[],v={props:{expenseid:{type:String,required:!0}},data:function(){return{isLoading:!1,ExpenseApproverStatusData:null,noRecordForTab:!1}},created:function(){this.FetchData()},methods:{CloseExpenseApproverStatus:function(e){this.$emit("CloseExpenseApproverStatus",e)},FetchData:function(){var e=this;e.isLoading=!0;var t=`id=${e.expenseid}&approvalTypeId=2&approvalChainId=0&approverOrder=0`;n["a"].ExpenseApproverStatusListing(t).then((function(t){null!=t.data&&t.data.length>0?e.ExpenseApproverStatusData=t.data:(e.noRecordForTab=!0,e.ExpenseApproverStatusData=[]),e.isLoading=!1}))}}},f=v,C=a("2877"),g=Object(C["a"])(f,m,h,!1,null,null,null),_=g.exports,x={components:{ExpenseComments:p["a"],ExpenseApproverStatus:_,ExpenseAttachents:u["a"]},data(){return{isLoading:!1,widgets:[],showFileModal:!1,searchCondition:"",TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",noRecord:!1,CurrentPage:1,TotalPages:0,ExpenseApprovalData:[],Headers:[{COLUMN_NAME:"Date",DATA_TYPE:"date",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Date",DISPLAY_ORDER:1},{COLUMN_NAME:"Title",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Title",DISPLAY_ORDER:2},{COLUMN_NAME:"UserName",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("UserName"),DISPLAY_ORDER:3},{COLUMN_NAME:"Category",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Category",DISPLAY_ORDER:4},{COLUMN_NAME:"Project",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("Project_Name"),DISPLAY_ORDER:5},{COLUMN_NAME:"Amount",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Amount",DISPLAY_ORDER:6,settings:{isInSlot:!0}}],listheaderbuttons:d.buttons,leftSearchFields:d.leftsearchSchema,listActions:d.listActions,ExpenseGetProjectList:null,ExpenseGetUserList:null,showCommentModal:!1,CommentHeader:null,UserName:null,isSingleCommentforMultipleExpenses:null,statuscode:"",showApproverStatusModal:!1,IsShowAction:!0,visibility:!0,access:!0,LegendArray:[],showData:""}},created:function(){var e=this;d.bindleftCommonSearchdropdown(e,"Project","no",""),d.bindleftCommonSearchdropdown(e,"User","","EXPENSEAPPROVAL"),d.bindleftCommonSearchdropdown(e,"Show Data","",""),e.FetchData(),e.UserName=e.GetUserInfo.Name,e.LegendArray=[{class:"legend-pending colorboxsquare",text:e.$t("DueExpenses",["Expenses"])},{class:"legends_profile colorboxsquare",text:e.$t("OverdueExpenses",["Expenses"])}]},methods:{FetchData:function(){var e=this;e.isLoading=!0;var t=`pageSize=${e.PageSize}&pageNum=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&${e.searchCondition}`;n["a"].ExpenseApprovalListing(t).then((function(t){if(e.isLoading=!1,null!=t.data&&""!=t.data)if(e.ExpenseApprovalData=t.data,e.ExpenseApprovalData.length>0){for(var a in e.ExpenseApprovalData)e.ExpenseApprovalData[a].isCheckBoxDisabled=!1,"ApprovalPending"!=e.ExpenseApprovalData[a].Status&&(e.ExpenseApprovalData[a].isCheckBoxDisabled=!0);e.ExpenseApprovalData.forEach(e=>{e.additionalClass="",e.EXPENSESCONSIDEREDASOVERDUE<=0&&(e.additionalClass="high-bar"),e.QuicklyExpenseMustBeApproved>=0&&(e.additionalClass="high-profile-bar")}),e.TotalRecords=e.ExpenseApprovalData[0].TotalRecords,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.noRecord=!1}else e.noRecord=!0,e.ExpenseApprovalData=[],e.TotalRecords=0;else e.noRecord=!0,e.ExpenseApprovalData=[],e.TotalRecords=0;setTimeout((function(){e.CheckBoxBootstrap()}),100),setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500)}))},DisableInputBox:function(e){var t="";switch(e){case"Approved":case"Active":case"ApprovalPending":t="disbaled";break;case"Rejected":case"SentForCorrection":case"Draft":default:t=""}return t},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(t=>{let s={...t};switch(s.title){case"ViewAttchedFiles":s.isVisible=0!=e.FILESCOUNT;break;case"Comments":s.isVisible=0!=e.filescount;break;case"Send For Correction":s.isVisible=0!=e.commentscount||"ACT"!=e.status_code;break;case"ApproverStatus":s.isVisible=1==e.UseSequence||0==e.UseSequence&&"Approved"==e.Status;break;default:s.isVisible=!0}a.push(s)}),a},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?(this.searchCondition=e.searchConditionJson,this.searchCondition=this.searchCondition.replace("|","&dateTo=")):this.searchCondition="",this.FetchData()},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},actionButtonClick:function(e,t){switch(e){case"Edit":break;case"openAddNewEvent":this.openAddNewEvent(t);break;case"SendForCorrection":this.commonApproval("EXP_SEND_FOR_CORRECTION");break;case"ApproverStatus":this.ApproverStatus(t);break;case"downloadAttachment":this.OpenFileModal(t);break}},CloseExpenseAttachments:function(){this.showFileModal=!1},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.FetchData(),$("#"+e+"  span:first-child").attr("class",t)},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"setTourGuideSteps":this.setTourGuideSteps(0);break;case"SendForApprovalApprove":this.commonApproval("EXP_APPROVED");break;case"SendForApprovalReject":this.commonApproval("EXP_REJECTED");break;case"ViewHistory":this.ViewHistoryList();break}},ViewHistoryList:function(){this.$router.push({name:"ExpenseHistory"})},CloseExpenseComments:function(){this.showCommentModal=!1},commonApproval:function(e){var t=this;t.CommentHeader=`Comment for ${t.UserName} Expense Approval`,t.isSingleCommentforMultipleExpenses=1;for(var a=$("input.chkItems:checked"),s="",i=0;i<a.length;i++){var n=$(a[i]).val(),o=0,r=0,l=0;""==o&&(o=0),s=0==i?n+"$"+o+"$"+r+"$"+l+"$":s+","+n+"$"+o+"$"+r+"$"+l+"$",1}t.showCommentModal=!0,t.expid=s,t.statuscode=e,this.visibility=1,this.access=1},openAddNewEvent:function(e){this.CommentHeader="Comment",this.isSingleCommentforMultipleExpenses=0,this.showCommentModal=!0,this.statuscode=null,this.expid=e.EXPENSEID,this.visibility=1,this.access=0},OpenFileModal:function(e){this.showFileModal=!0,this.expid=e.EXPENSEID,this.statuscode=e.status_code},ApproverStatus:function(e){this.showApproverStatusModal=!0,this.expid=e.EXPENSEID},CloseExpenseApproverStatus:function(){this.showApproverStatusModal=!1}}},E=x,b=Object(C["a"])(E,s,i,!1,null,null,null);t["default"]=b.exports},"4e8b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"main-content"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 padding-t_8"},[a("div",{staticClass:"theme-primary partition-full"},[a("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("ManageExpense")))]),a("span",{staticClass:"float-right"},[a("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:"Page Tour"},on:{click:function(t){return e.setTourGuideSteps(0)}}},[a("em",{staticClass:"fa fa-road",attrs:{"aria-hidden":"true"}}),a("br"),e._v(e._s(e.$t("PageTour"))+" ")])])])])])]),a("div",{staticClass:"border p-3"},[a("dynamic-form",{ref:"form",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}}),e.showFileModal?a("ExpenseAttachents",{attrs:{expenseid:e.expid,code:e.statuscode},on:{CloseExpenseAttachments:e.CloseExpenseAttachments}}):e._e(),e.ShowTripModel?a("ModelTrip",{on:{CloseExpenseTrip:e.CloseExpenseTrip,GetTripNameDDL:e.GetTripNameDDL}}):e._e(),e.ShowTagModel?a("ModelTag",{on:{CloseExpenseTag:e.CloseExpenseTag}}):e._e()],1)],1)},i=[],n=(a("5319"),a("9769")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full"},[a("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("AddTrip")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.CloseExpenseTrip()}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[e.DataLoaded?a("dynamic-form",{attrs:{buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.OnSubmit}}):e._e(),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("MandatoryString")))])])])],1)])])])],1)},r=[],l={data(){return{DataLoaded:0,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("TripName"),name:"TripName",value:"",placeholder:"",validationRules:{required:!0}},{astype:"SelectField",label:this.$t("STATUS_ID"),name:"status",value:"1001",placeholder:"",config:{options:[{value:"1001",name:"Active"},{value:"1002",name:"InActive"}]}}]},{layoutType:"Single",Data:[{astype:"TextAreaField",label:this.$t("TripDescription"),name:"TripDescription",value:"",placeholder:"",validationRules:{required:!0},config:{rows:5}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.CloseExpenseTrip}]}},created:function(){this.DataLoaded=1},methods:{CloseExpenseTrip:function(){this.$emit("CloseExpenseTrip")},OnSubmit:function(e){var t=this;t.isLoading=!0;var a={TripId:0,TripName:e.TripName,StatusId:e.status,TripDesc:e.TripDescription};a=JSON.stringify(a);n["a"].SaveUpdateTrip(a).then(e=>{"Success"==e.data.Status?(t.$emit("CloseExpenseTrip"),t.$emit("GetTripNameDDL"),t.ShowAlert(t.$t("AddedSuccess",[t.$t("Trip")]),"success",!0,t.$t("Alert"))):"Exists"==e.data.Status?t.ShowAlert(t.$t("AlreadyExists",[t.$t("Trip")]),"failure",!0,t.$t("Alert")):t.ShowAlert(t.$t("AddedError",[t.$t("Trip")]),"failure",!0,t.$t("Alert")),t.isLoading=!1})}}},c=l,d=a("2877"),p=Object(d["a"])(c,o,r,!1,null,null,null),u=p.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full"},[a("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("AddTag")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.CloseExpenseTag()}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[e.DataLoaded?a("dynamic-form",{attrs:{buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.OnSubmit}}):e._e(),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("MandatoryString")))])])])],1)])])])],1)},h=[],v={data(){return{isLoading:!1,DataLoaded:0,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("TagName"),name:"TagName",value:"",placeholder:"",validationRules:{required:!0}},{astype:"SelectField",label:this.$t("STATUS_ID"),name:"status",value:"1001",placeholder:"",config:{options:[{value:"1001",name:"Active"},{value:"1002",name:"InActive"}]}}]},{layoutType:"Single",Data:[{astype:"TextAreaField",label:this.$t("TagDescription"),name:"TagDescription",value:"",placeholder:"",validationRules:{required:!0},config:{rows:5}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.CloseExpenseTag}]}},created:function(){this.DataLoaded=1},methods:{CloseExpenseTag:function(){this.$emit("CloseExpenseTag")},OnSubmit:function(e){var t=this;t.isLoading=!0;var a={TagId:0,TagName:e.TagName,TagDesc:e.TagDescription,ModuleName:"Expenses",StatusID:e.status};a=JSON.stringify(a);n["a"].SaveTag(a).then(e=>{"Success"==e.data[0].Status?(t.$emit("CloseExpenseTag"),t.$parent.GetTagNameDDL(),t.ShowAlert(t.$t("AddedSuccess",[t.$t("Tag")]),"success",!0,t.$t("Alert"))):t.ShowAlert(t.$t("AlreadyExists",[t.$t("Tag")]),"warning",!0,t.$t("Alert")),t.isLoading=!1}),t.isLoading=!1}}},f=v,C=Object(d["a"])(f,m,h,!1,null,null,null),g=C.exports,_=(a("5333"),{components:{ModelTag:g,ModelTrip:u},data(){return{isLoading:!1,showFileModal:!1,ShowTripModel:!1,ShowTagModel:!1,CategoryDataddl:[],TaskDataddl:[],CurrencyNameddl:[],TagDataddl:[],usertype:null,ExpenseId:0,ProjectData:"",ExpAmount:"",IsSendForApproval:null,file:[],fileCount:"",expid:"",txtAmountCode:"",Currency:null,chkStatus:"",TripData:[],FormSchema:[{layoutType:"four",Data:[{astype:"TextField",label:this.$t("ExpenseTitletext"),name:"EXPENSE_TITLE",value:"",placeholder:"",validationRules:{required:!0,max:250}},{astype:"DateField",label:this.$t("ExpenseDate"),name:"EXPENSE_DATE",value:"",placeholder:"M/D/YYYY",validationRules:"required",config:{format:"MM/DD/YYYY"}},{astype:"SelectField",label:this.$t("Header_Projects"),name:"PROJECT_ID",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Trip"),name:"ExpenseTrip",value:"",placeholder:"",config:{options:[],showAddIcon:!0,onAddButtonClick:this.OpenPopup},validationRules:""},{astype:"SelectField",label:"Category",name:"EXPENSE_CATEGORY_ID",value:"",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:"required"},{astype:"SelectField",label:"Task",name:"TASK_ID",value:"",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:""},{astype:"NumericField",label:this.$t("Amount"),name:"EXPENSE_AMOUNT",value:"",placeholder:"",validationRules:{required:!0,max:8},config:{onkeypress:this.ExpenseAmount}},{astype:"SelectField",label:this.$t("Currency"),name:"currency_id",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.OnChangeCurrency},validationRules:"required"},{astype:"SelectField",label:this.$t("Tag"),name:"ExpenseTag",value:"",placeholder:"",config:{options:[],showAddIcon:!0,onAddButtonClick:this.OpenPopup},validationRules:""}]},{group_name:"Attachment",layoutType:"four",Data:[{astype:"FileField",showLabel:!1,name:"ExpenseAttechment",value:"",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"pdf",iconClass:"fa-file-archive-o"}],onChange:this.setFile,showAddIcon:!1,onAddButtonClick:this.AddFileMore,multiple:!0}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("ExpenseDescription"),name:"EXPENSE_DESCRIPTION",value:"",placeholder:"",validationRules:"",config:{rows:5}}]}],buttons:[{type:"submit",class:"btn btn-warning",text:"<i class='fa fa-save pr-2'></i>Save Of Draft"},{type:"submit",class:"btn btn-success saveSendforApproval",text:"<i class='fa fa-paper-plane pr-2'></i>Save and Send for Approval"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.onCancel}],expenseData:[]}},created:async function(){this.ExpenseId=this.$route.params.Id?this.$route.params.Id:0,this.usertype=this.GetUserInfo.UserType,this.Currency=this.GetUserInfo.Currency.replace("(","").replace(")",""),await this.GetProjectDDL(),await this.FetchData(),await this.GetTripNameDDL(),await this.GetCategoryNameDDL(),await this.GetCurrencyNameDDL(),await this.GetTagNameDDL()},mounted(){setTimeout(()=>{this.expenseData.length>0&&this.$refs.form.SetFormValues(this.expenseData)},3e3)},methods:{OnChangeCurrency:function(e,t){var a=$("ExpenseCurrency"==t.name).text().indexOf("("),s=$("ExpenseCurrency"==t.name).text().indexOf(")",parseInt(a)),i=$("ExpenseCurrency"==t.name).text().substring(parseInt(a),parseInt(s)+1);$("ExpenseAmount"==e.target.name).html(i),""==$("ExpenseAmount"==e.target.name).text()&&$("ExpenseAmount"==e.target.name).text(this.Currency)},AddFileMore:function(e,t){var a=this;a.FormSchema[1].Data.push({astype:"FileField",showLabel:!1,name:"ExpenseAttechment",value:"",placeholder:"",validationRules:"",FieldIndex:a.FormSchema[1].Data.length,config:{onChange:a.setFile,showAddIcon:!0,onAddButtonClick:a.RemoveFile,addIconBackground:"bg-danger",addIcon:"fa fa-times"}})},RemoveFile:function(e,t){var a=this,s=a.FormSchema[1].Data.findIndex(e=>e.FieldIndex===t.FieldIndex);s>-1&&a.FormSchema[1].Data.splice(s,1)},OpenPopup:function(e,t){"ExpenseTrip"==t.name?this.ShowTripModel=!0:this.ShowTagModel=!0},onChangeDropdown:async function(e,t,a){this.ProjectData=e.target.value,a&&a.forEach(e=>{for(var t in e)this.schema.forEach(a=>{a.Data.forEach(a=>{t==a.name&&(a.config.options=e[t])})})}),await this.GetTaskDDL(),await this.GetCurrencyCode()},ViewFile:function(){this.showFileModal=!0,this.expid=this.ExpenseId},CloseExpenseAttachments:function(){this.showFileModal=!1},onCancel:function(){this.$router.push({name:"Expense"})},FetchData:async function(e){var t=this;const a="ExpenseId="+t.ExpenseId;await n["a"].GetExpenseByExpenseId(a).then(async e=>{e.data.length>0&&(t.FormSchema[0].Data[0].value=e.data[0].EXPENSE_TITLE,t.FormSchema[0].Data[1].value=e.data[0].EXPENSE_DATE,t.FormSchema[0].Data[2].value=e.data[0].PROJECT_ID,t.FormSchema[0].Data[3].value=e.data[0].TRIP_ID,t.FormSchema[0].Data[4].value=e.data[0].EXPENSE_CATEGORY_ID,t.FormSchema[0].Data[5].value=e.data[0].TASK_ID,t.FormSchema[0].Data[6].value=e.data[0].EXPENSE_AMOUNT,t.FormSchema[0].Data[7].value=e.data[0].currency_id,t.FormSchema[2].Data[0].value=e.data[0].EXPENSE_DESCRIPTION,t.FormSchema[1].Data[0].value=e.data[0].expense_file_path,t.fileCount=e.data[0].FILE_COUNT,t.chkStatus=e.data[0].STATUS_ID,t.ProjectData=e.data[0].PROJECT_ID,await t.GetTaskDDL(),await t.GetCurrencyCode())})},setFile:function(e){console.log(e.target.files);for(let t=0;t<e.target.files.length;t++){const a=e.target.files[t];this.file.push(a)}},onSubmit:function(e,t){var a=this,s=e,i={ExpenseId:a.ExpenseId,ExpenseTitle:s.EXPENSE_TITLE,TripId:s.ExpenseTrip,ProjectId:s.PROJECT_ID,ExpDesc:s.EXPENSE_DESCRIPTION,ExpAmount:s.EXPENSE_AMOUNT,CategoryId:s.EXPENSE_CATEGORY_ID,TaskId:s.TASK_ID,ExpAttachment:"",IsBulkUpload:0,CurrencyId:s.currency_id,ExpDate:s.EXPENSE_DATE,IsSendForApproval:t.indexOf("Save and Send for Approval")>0?1:0};const o=new FormData;o.append("postString",JSON.stringify(i)),o.append("files",a.file);for(var r=0;r<a.file.length;r++){let e=a.file[r];o.append("files["+r+"]",e)}a.isLoading=!0,n["a"].SaveUpdateExpense(o).then(e=>{a.isLoading=!1,"100"==e.data.error&&(a.ShowAlert(a.$t("ExpenseAdd",[a.$t("Expense")]),"success",!0,a.$t("Alert")),this.$router.push({name:"Expense"}))})},CloseExpenseTrip:function(){this.ShowTripModel=!1},CloseExpenseTag:function(){this.ShowTagModel=!1},GetProjectDDL:async function(){var e=this,t="associated=no";await n["a"].ExpenseGetProjectListing(t).then((function(t){e.FormSchema[0].Data[2].config.options=t.data}))},GetTripNameDDL:async function(){var e=this;e.FormSchema[0].Data[3].config.options=[],await n["a"].GettTripListingddl().then((function(t){e.TripData=t.data,e.TripData.forEach((t,a)=>{e.FormSchema[0].Data[3].config.options.push({value:t.TRIP_ID,name:t.TRIP_NAME})})}))},GetCategoryNameDDL:async function(){var e=this;await n["a"].GettCategoryListingddl().then((function(t){e.CategoryDataddl=t.data,e.CategoryDataddl.forEach((t,a)=>{e.FormSchema[0].Data[4].config.options.push({value:t.EXPENSE_CATEGORY_ID,name:t.CATEGORY_NAME})})}))},GetTaskDDL:async function(){var e=this,t="projectId="+e.ProjectData;await n["a"].GetTaskListingddl(t).then((function(t){e.TaskDataddl=t.data,e.TaskDataddl.forEach((t,a)=>{e.FormSchema[0].Data[5].config.options.push({value:t.task_id,name:t.task_name})})}))},GetCurrencyNameDDL:async function(){var e=this;await n["a"].GetCurrencyNameddl().then((function(t){e.CurrencyNameddl=t.data,e.CurrencyNameddl.forEach((t,a)=>{e.FormSchema[0].Data[7].config.options.push({value:t.CurrencyId,name:t.Currency})})}))},GetTagNameDDL:async function(){var e=this,t="moduleName=Expenses";await n["a"].GetTagNameddl(t).then((function(t){e.TagDataddl=t.data,e.TagDataddl.forEach((t,a)=>{e.FormSchema[0].Data[8].config.options.push({value:t.value,name:t.text})})}))},GetCurrencyCode:async function(){var e=this,t=e.$t("Amount"),a="projectId="+e.ProjectData;await n["a"].GetCurrencyCode(a).then((function(a){e.FormSchema[0].Data[6].label=t+"("+a.data+")"}))}}}),x=_,E=(a("6ea4"),Object(d["a"])(x,s,i,!1,null,null,null));t["default"]=E.exports},"51e6":function(e,t,a){"use strict";var s=a("c9cb"),i=a.n(s);i.a},5333:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("Attachments"))+" ")]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.CloseExpenseAttachments(t)}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"listing"},[e.noRecordForTab?e._e():a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table dt-responsive nowrap mt-0",attrs:{id:"table-openactivities-content"}},[e._m(0),a("tbody",e._l(e.attachmentsData,(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(s+1)+".")]),a("td",[e._v(e._s(t.EXPENSE_FILE_NAME))]),a("td",[a("a",{staticClass:"round-icon-small btn-primary-light",attrs:{title:"DownloadFile",href:"javascript:;"},on:{click:function(a){return e.downloadAttachment(t)}}},[a("i",{staticClass:"fa fa-download"})]),a("a",{staticClass:"round-icon-small btn-danger-light",attrs:{href:"javascript:;",title:"DeleteFile"},on:{click:function(a){return e.deleteAttachment(t)}}},[a("i",{staticClass:"fa fa-trash-o"})])])])})),0)])])]),e.noRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border no-record"},[e._v(e._s(e.$t("NoRecordfound")))]):e._e()])])])])],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[a("span",[e._v("#")])]),a("th",[a("span",[e._v("FileName")])]),a("th",[a("span",[e._v("Action")])])])])}],n=(a("ddb0"),a("2b3d"),a("9769")),o={props:{expenseid:null,code:{type:String,required:!0}},data:function(){return{isLoading:!1,attachmentsData:[],noRecordForTab:!1,statuscode:"",Expense_Id:""}},created:function(){this.statuscode=this.code,this.Expense_Id=this.expenseid,this.Fetchdata()},methods:{Fetchdata:function(){var e=this,t="expenseid="+e.expenseid;n["a"].GetExpenseFileList(t).then((function(t){e.isLoading=!0,t.data.length>0||""!=t.data?(e.attachmentsData=t.data.DATA,e.noRecordForTab=!1):(e.noRecordForTab=!0,e.attachmentsData=null,e.isLoading=!1),e.isLoading=!1}))},downloadAttachment:function(e){var t=this;t.isLoading=!0;var a=`fileId=${e.EXPENSE_ID}&filePath=${e.EXPENSE_FILE_PATH}&fileType=${e.CONTENT_TYPE}&fileName=${e.EXPENSE_FILE_NAME}&downloadType=single`;n["a"].downloadAttachment(a).then((function(a){t.isLoading=!1;var s=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=s,i.setAttribute("download",e.EXPENSE_FILE_NAME),document.body.appendChild(i),i.click()}))},deleteAttachment:function(e){var t=this;t.confirmR(this.$t("ConfirmDelete"),!0,this.$t("Delete")+"  "+this.$t("Attachment"),(function(){t.isLoading=!0;var a=`fileId=${e.EXPENSE_FILE_ID}&expId=${e.EXPENSE_ID}`;n["a"].DeleteAttachment(a).then((function(e){t.isLoading=!1,200==e.status&&(t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Attachment")]),"success",!0,t.$t("Alert")),t.Fetchdata())}))}))},CloseExpenseAttachments:function(e){this.$emit("CloseExpenseAttachments",e)}}},r=o,l=a("2877"),c=Object(l["a"])(r,s,i,!1,null,null,null);t["a"]=c.exports},"646c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"left-menu-tab new_tab"},[a("leftsearch",{attrs:{header:e.HeaderText,fields:e.SearchFields,modulename:e.ModuleName,for:"ExpenseReport"},on:{SetLeftSearch:e.SetActiveKey}})],1),a("div",{staticClass:"right-content"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"theme-primary partition p-actions-expand",staticStyle:{overflow:"visible"}},[a("span",{staticClass:"p-name text-white",attrs:{id:"spnreporttext"}},[e._v(e._s(e.TabName))]),a("span",{staticClass:"p-actions float-right"},[a("a",{staticClass:"p-action-btn text-white",staticStyle:{display:"none"},attrs:{href:"javascript:;",id:"ancshowmorefilter",title:"Show More Filter"}},[a("i",{staticClass:"fa fa-filter",attrs:{"aria-hidden":"true"}}),a("br"),e._v(e._s(e.$t("ShowMoreFilter")))])]),e._m(0)])]),a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"tab-content",attrs:{id:"myTabContent"}},[e._m(1),1==e.activeKey?a("div",{staticClass:"tab-pane active",class:{"active show":1==e.activeKey},attrs:{id:"ExpenseOverLimitReport"}},[a("div",{attrs:{id:"listing"}},[a("div",{staticClass:"col-md-12 p-0"},[a("form",{attrs:{id:"frmReport",method:"post",target:"iReport","asp-controller":"ReportCommon","asp-action":"ReportMain"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Project"))+":")]),a("Multiselect",{attrs:{multiple:!0,placeholder:"Choose your Project","close-on-select":!1,"preselect-first":!0,"min-chars":1,"resolve-on-load":!1,delay:0,"preserve-search":!0,options:e.projects,"track-by":"value",object:!0,label:"label"},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,i=(t.search,t.isOpen);return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!i,expression:"!isOpen"}],staticClass:"multiselect__single"},[e._v(e._s(s.length)+" options selected")]):e._e()]}}],null,!1,2615756560),model:{value:e.projectId,callback:function(t){e.projectId=t},expression:"projectId"}})],1)]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Category"))+":")]),a("Multiselect",{attrs:{multiple:!0,placeholder:"Choose your Category","close-on-select":!1,"preselect-first":!0,"min-chars":1,"resolve-on-load":!1,delay:0,"preserve-search":!0,options:e.categories,"track-by":"value",label:"label",object:!0},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,i=(t.search,t.isOpen);return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!i,expression:"!isOpen"}],staticClass:"multiselect__single"},[e._v(e._s(s.length)+" options selected")]):e._e()]}}],null,!1,2615756560),model:{value:e.categoryId,callback:function(t){e.categoryId=t},expression:"categoryId"}})],1)]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("OverLimit"))+":")]),a("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[a("input",{staticClass:"custom-control-input dynamic",attrs:{type:"checkbox",id:"chkoverlimit",name:"chkoverlimit",value:"1"},domProps:{checked:e.isexpenseOverLimit}}),a("label",{staticClass:"custom-control-label",attrs:{for:"chkoverlimit"}})])])]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Date"))+"(M/D/YYYY) :")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"input-group"},[a("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5,attributes:e.attrs},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents,n=t.togglePopover;return[a("input",e._g({class:{"form-control date":!0},attrs:{placeholder:"M/D/YYYY"},domProps:{value:s}},i)),a("div",{staticClass:"input-group-append",on:{click:function(e){return n()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!1,70578040),model:{value:e.dtFrom,callback:function(t){e.dtFrom=t},expression:"dtFrom"}})],1)]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"input-group"},[a("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5,attributes:e.attrs},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents,n=t.togglePopover;return[a("input",e._g({class:{"form-control date":!0},attrs:{placeholder:"M/D/YYYY"},domProps:{value:s}},i)),a("div",{staticClass:"input-group-append",on:{click:function(e){return n()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!1,70578040),model:{value:e.dtTO,callback:function(t){e.dtTO=t},expression:"dtTO"}})],1)])])])])]),a("div",{staticClass:"row flex-row-reverse mt-2"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success formbtn text-white mr-1",attrs:{href:"javascript:;",id:"aSearch",title:e.$t("Search"),name:"aSearch"},on:{click:e.onSearch}},[a("i",{staticClass:"fa fa-search pr-2"}),e._v(e._s(e.$t("Search")))]),a("a",{staticClass:"btn btn-danger formbtn widthhalf btnCancel",attrs:{href:"javascript:;",title:e.$t("Clear"),id:"aClear"},on:{click:e.onClear}},[a("i",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("ClearAll")))])])])])]),a("div",{staticClass:"row placeholder"},[a("div",{staticClass:"col-md-12 p-0"},[e.parameter.length>0?a("ReportViewer",{attrs:{parameter:e.parameter,reportPath:e.reportPath}}):e._e()],1)])])]):e._e(),2==e.activeKey?a("div",{staticClass:"tab-pane",class:{"active show":2==e.activeKey},attrs:{id:"ExpenseReport"}},[a("ExpenseReport")],1):e._e(),3==e.activeKey?a("div",{staticClass:"tab-pane",class:{"active show":3==e.activeKey},attrs:{id:"reimbursementreport"}},[a("ReimbursementReport")],1):e._e()])])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"collapse-head-btns"},[a("a",{staticClass:"collapse-btns",attrs:{href:"javascript:;"}},[a("i",{staticClass:"fa fa-angle-up text-white"})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expand-list"},[a("a",{staticClass:"expand-list-btn justify-content-center align-items-center",attrs:{href:"javascript:;"}},[a("i",{staticClass:"icon-solid arrow-solid-left text-white",staticStyle:{"font-size":"9pt"}})])])}],n=a("9769");let o=[{fieldName:"ExpenseOverLimit",fieldType:"anchor",fieldIcon:"fa fa-print clsexpense",href:"#ExpenseOverLimitReport",id:"aExpenseOverLimitReport",privilege:!0},{fieldName:"ExpenseReport",fieldType:"anchor",fieldIcon:"fa fa-file-text-o",href:"#ExpenseReport",id:"aExpenseReport",privilege:!0},{fieldName:"Reimbursements",fieldType:"anchor",fieldIcon:"fa fa-file-pdf-o",href:"#ReimbursementReport",id:"aReimbursementReport",privilege:!0}];var r={leftsearchSchema:o},l=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"600px"}},[a("div",{staticStyle:{width:"100%","min-height":"650px","margin-bottom":"0%",height:"auto"},attrs:{id:"viewer"}})])}],d={props:{reportPath:null,parameter:null},data:function(){return{Token:null}},created:function(){this.Token=this.GetUserInfo.Token},mounted(){var e=this;console.log(e.parameter),setTimeout((function(){$("#viewer").boldReportViewer({reportServiceUrl:"http://localhost:12597/api/ReportViewer",reportPath:e.reportPath,processingMode:"Remote",parameters:e.parameter,reportServerUrl:"http://192.168.0.200/ReportServer",ajaxBeforeLoad:e.setReportToken})}),2e3)},methods:{setReportToken:function(e){e.headers.push({Key:"content-type",Value:"application/json;charset=UTF-8"}),e.headers.push({Key:"Authorization",Value:"Bearer "+this.Token})}}},p=d,u=a("2877"),m=Object(u["a"])(p,l,c,!1,null,null,null),h=m.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"theme-primary partition"},[e.header?a("span",{staticClass:"p-name text-white"},[e._v(e._s(e.GetLocalizedValue(e.header)))]):e._e()])]),e.showExpenseContent()?a("div",{staticClass:"pt-2 mb-1 w-100 d-none d-lg-block"},[e._m(0)]):e._e(),e.showExpenseContent()?a("div",{staticClass:"mt-2",staticStyle:{"max-height":"700px"},attrs:{id:"divscrollsetuptabs"}},[a("ul",{staticClass:"nav nav-pills flex-column left-tab responivecustomtab lefttabiconfix lefttabflexible",attrs:{id:"upper",role:"tablist"}},e._l(e.Fields,(function(t,s){return a("li",{key:s},[a("a",{class:{"nav-link left-menu":!0,active:0==s},attrs:{"data-toggle":"tab",href:t.href,id:t.id,privilege:t.privilege},on:{click:function(a){return e.setActiveKey(t)}}},[a("i",{staticClass:"mr-1 mt-1",class:t.fieldIcon,attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.GetLocalizedValue(t.fieldName))+" ")])])})),0)]):e._e(),e.showExpenseContent()?e._e():a("div",{staticClass:"accordion md-accordion left-filter mt-2",attrs:{id:"accordionEx",role:"tablist","aria-multiselectable":"true"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header filter-head",attrs:{role:"tab",id:"headingOne1"}},[a("h5",{staticClass:"mb-0"},[a("em",{staticClass:"fa fa-filter",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.GetLocalizedValue(e.$t("Search")))+" "),a("span",{staticClass:"expand_all_filters"},[a("span",{attrs:{id:"SearchData"},on:{click:function(t){return e.SearchData()}}},[a("a",{staticClass:"collapsed",attrs:{href:"javascript:;",title:e.$t("Search"),"data-toggle-tooltip":"tooltip"}},[a("em",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])]),a("span",{on:{click:function(t){return e.ClearFilter()}}},[a("a",{staticClass:"collapsed",attrs:{title:e.$t("Reset"),href:"javascript:;","data-toggle-tooltip":"tooltip"}},[a("em",{staticClass:"fa fa-repeat",attrs:{"aria-hidden":"true"}})])]),a("span",{staticClass:"collapsed",attrs:{"data-target":".multi-collapse","data-toggle":"collapse"},on:{click:function(t){return e.ExpandCollapsedAll()}}},[a("a",{staticClass:"collapsed",attrs:{href:"javascript:;",title:e.$t("ExpandAllCollapseAll"),"data-toggle-tooltip":"tooltip"}},[a("em",{staticClass:"fa fa-sort-desc",attrs:{"aria-hidden":"true"}})])])])])])]),a("div",{staticClass:"card-panel"},e._l(e.Fields,(function(t,s){return a("div",{key:s,staticClass:"card"},[a("div",{staticClass:"card-header",attrs:{role:"tab",id:"headingOnee"+s}},[a("h5",{staticClass:"mb-0"},[a("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-parent":"#accordionEx",href:"#collapseOne"+s,"aria-expanded":"false","aria-controls":"collapseOne"+s}},[a("em",{class:"fa "+t.fieldIcon,attrs:{"aria-hidden":"true"}}),a("span",{class:{filter:t.isSearch}},[e._v(e._s(e.GetLocalizedValue(t.fieldName)))]),a("em",{staticClass:"fa fa-angle-down rotate-icon",attrs:{"aria-hidden":"true"}})]),a("a",{class:{"tab-Search-btn":!0,"d-block":t.value.length>0},attrs:{href:"javascript:;"},on:{click:function(t){return e.SearchData()}}},[a("em",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])])]),a("div",{staticClass:"collapse multi-collapse",attrs:{id:"collapseOne"+s,role:"tabpanel","aria-labelledby":"headingOnee"+s,"data-parent":"#accordionEx"}},[a("div",{staticClass:"card-body pt-0"},["text"==t.fieldType?a("div",{staticClass:"form-group"},["checkbox"===(1==t.isNumeric?"number":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"field.value"}],staticClass:"form-control search",attrs:{placeholder:t.fieldName+" ",type:"checkbox"},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{keydown:function(a){return e.SearchOnEnter(a,t)},change:function(a){var s=t.value,i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=null,r=e._i(s,o);i.checked?r<0&&e.$set(t,"value",s.concat([o])):r>-1&&e.$set(t,"value",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(t,"value",n)}}}):"radio"===(1==t.isNumeric?"number":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"field.value"}],staticClass:"form-control search",attrs:{placeholder:t.fieldName+" ",type:"radio"},domProps:{checked:e._q(t.value,null)},on:{keydown:function(a){return e.SearchOnEnter(a,t)},change:function(a){return e.$set(t,"value",null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"field.value"}],staticClass:"form-control search",attrs:{placeholder:t.fieldName+" ",type:1==t.isNumeric?"number":"text"},domProps:{value:t.value},on:{keydown:function(a){return e.SearchOnEnter(a,t)},input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):e._e(),"date"==t.fieldType||"date-range"==t.fieldType?a("div",{staticClass:"form-group"},[a("div",{class:{"input-group":!0,"mb-2":"date-range"==t.fieldType}},[a("v-date-picker",{staticClass:"input-group",attrs:{popover:e.popover,"model-config":e.modelConfig,"minute-increment":5,name:"DateFrom"+s,change:e.SetMinMaxValueForDatePicker(t,"datefrom"),"max-date":t.datePickerConfig.maxDate},scopedSlots:e._u([{key:"default",fn:function(s){var i=s.inputValue,n=s.inputEvents,o=s.togglePopover;return[a("input",e._g({staticClass:"form-control",attrs:{placeholder:"date-range"==t.fieldType?e.$t("DateFrom"):t.fieldName},domProps:{value:i}},n)),a("div",{staticClass:"input-group-append",on:{click:function(e){return o()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"field.value"}})],1),"date-range"==t.fieldType?a("div",{class:{"input-group":!0,disabled:!t.secondDatePickerConfig.minDate}},[a("v-date-picker",{staticClass:"input-group",attrs:{popover:e.popover,"model-config":e.modelConfig,"minute-increment":5,name:"DateTo"+s,change:e.SetMinMaxValueForDatePicker(t,"dateto"),"min-date":t.secondDatePickerConfig.minDate},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents,n=t.togglePopover;return[a("input",e._g({staticClass:"form-control",attrs:{placeholder:e.$t("DateTo")},domProps:{value:s}},i)),a("div",{staticClass:"input-group-append",on:{click:function(e){return n()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.secondValue,callback:function(a){e.$set(t,"secondValue",a)},expression:"field.secondValue"}})],1):e._e()]):e._e(),"radio"==t.fieldType||"checkbox"==t.fieldType?a("div",{staticClass:"form-group"},e._l(t.listOptions,(function(i,n){return a("div",{key:n,class:{"custom-control w-auto custom-control-inline":!0,"custom-radio":"radio"==t.fieldType,"custom-checkbox":"checkbox"==t.fieldType}},["radio"==t.fieldType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"field.value"}],staticClass:"custom-control-input dynamic",attrs:{type:"radio",id:"customcheckbox"+s+n,name:"selectedDealOwner"},domProps:{value:i.value,checked:e._q(t.value,i.value)},on:{change:function(a){return e.$set(t,"value",i.value)}}}):e._e(),"checkbox"==t.fieldType?a("input",{staticClass:"custom-control-input dynamic",attrs:{type:"checkbox",id:"customcheckbox"+s+n,name:"selectedDealOwner"},domProps:{checked:e.CheckIfSelected(t,i.value),value:i.value},on:{change:function(a){return e.UpdateCheckedValues(t,i.value,a)}}}):e._e(),a("label",{staticClass:"custom-control-label",attrs:{for:"customcheckbox"+s+n}},[e._v(e._s(i.name))])])})),0):e._e(),"ddl-radio"==t.fieldType||"ddl-check"==t.fieldType?a("div",{staticClass:"form-group"},[a("vue-scroll",[a("div",{staticClass:"w-100 d-flex flex-wrap filterscroll filterscroll_leftsearch"},e._l(t.listOptions,(function(i,n){return a("button",{key:n,class:{"btn search-tag searchtagfloat float-left":!0,"d-none":e.CheckValueSelectedForbadge(i.value,t.value,t.isSearch)},attrs:{type:"button"}},[a("span",{staticClass:"tag-name"},[e._v(e._s(i.name))]),a("span",{staticClass:"badge text-dark",on:{click:function(a){return e.ClearFilerForbadge(i.value,t,s)}}},[e._v("Ã—")])])})),0)]),a("div",{staticClass:"w-100"},[a("div",{staticClass:"p-0 mb-1 w-100"},[a("div",{staticClass:"input-group customsearchbox"},[a("input",{staticClass:"form-control searchcustomfilter border-right-0",attrs:{type:"text",Placeholder:e.$t("Search"),autocomplete:"off"}}),e._m(1,!0)])]),a("vue-scroll",[a("div",{staticClass:"form-group filterscroll filterscroll_leftsearch",staticStyle:{"max-height":"200px"}},["ddl-check"==t.fieldType?a("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[a("input",{staticClass:"custom-control-input dynamic customcheckboxselectall",attrs:{id:"customcheckboxselectall"+s,type:"checkbox"},on:{change:function(a){return e.SelectAllRecords(t,a)}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"customcheckboxselectall"+s,type:"checkbox"}},[e._v("Select All")])]):e._e(),e._l(t.listOptions,(function(i,n){return a("div",{key:n,class:{"custom-control custom-checkbox custom-control-inline w-100":!0,"custom-radio":"ddl-radio"==t.fieldType,"custom-checkbox":"ddl-check"==t.fieldType}},["ddl-radio"==t.fieldType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"field.value"}],staticClass:"custom-control-input dynamic",attrs:{type:"radio",id:"customcheckbox"+s+n,name:"selectedDealOwner"},domProps:{value:i.value,checked:e._q(t.value,i.value)},on:{change:function(a){return e.$set(t,"value",i.value)}}}):e._e(),"ddl-check"==t.fieldType?a("input",{staticClass:"custom-control-input dynamic",attrs:{type:"checkbox",id:"customcheckbox"+s+n,name:"selectedDealOwner"},domProps:{checked:e.CheckIfSelected(t,i.value),value:i.value},on:{change:function(a){return e.UpdateCheckedValues(t,i.value,a,"customcheckboxselectall"+s)}}}):e._e(),a("label",{staticClass:"custom-control-label",attrs:{for:"customcheckbox"+s+n}},[e._v(e._s(i.name))])])}))],2)])],1)],1):e._e()])])])})),0)]),e.showExpenseContent()?e._e():a("div",{staticClass:"bottom_filter_button",on:{click:e.ExpandAllCollapseAll}},[a("a",{staticClass:"collapsed",attrs:{href:"javascript:;","data-target":".multi-collapse","data-toggle":"collapse"},on:{click:e.ExpandCollapsedAll}},[e._v(e._s(e.$t("ExpandAllCollapseAll")))])])])},f=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group customsearchbox"},[a("input",{staticClass:"form-control searchcustomfilter border-right-0",attrs:{type:"text",maxlength:"50",placeholder:"Search by Name",autocomplete:"off"}}),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text bg-transparent bg-white border-left-0"},[a("i",{staticClass:"fa fa-search"})])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text bg-transparent bg-white border-left-0"},[a("em",{staticClass:"fa fa-search"})])])}],C=(a("5319"),a("c1df")),g=a.n(C),_={props:{fields:{type:Array,required:!0},header:{type:String,required:!0},modulename:{type:String,required:!0},for:{type:String,required:!1}},data:function(){return{Fields:this.fields,popover:{visibility:"click"},modelConfig:{type:"string",mask:"YYYY-MM-DD"}}},watch:{fields:function(e){this.Fields=null!=e&&e.length>0?e:[]}},created:function(){},methods:{showExpenseContent(){return"ExpenseReport"==this.for},isBlank:function(e){return!e||/^\s*$/.test(e)},GetLocalizedValue:function(e,t){try{if(this.isBlank(t)){var a=this.$t(String(e).toUpperCase());return a!=String(e).toUpperCase()?a:(a=this.$t(String(e)),a||1==/^\s*$/.test(a)?a:e)}a=this.$t(String(t).toUpperCase());return a!=String(t).toUpperCase()?a:(a=this.$t(String(t)),a||1==/^\s*$/.test(a)?a:t)}catch(s){console.log(s)}},ExpandCollapsedAll:function(){},ClearFilter:function(){$.each(this.Fields,(function(e,t){t.isSearch=!1,t.value="",t.secondValue="","ddl-check"==t.fieldType&&$("#customcheckboxselectall"+e).prop("checked",!1),$(".tab-Search-btn").css("display","none")})),$(".searchcustomfilter").val(""),$(".searchcustomfilter").trigger("keyup"),this.SearchData()},CheckValueSelectedForbadge:function(e,t,a){var s=t.split(",");return!s.includes(e)||1!=a},ClearFilerForbadge:function(e,t,a){var s=t.value.split(","),i=s.indexOf(e);s.splice(i,1),t.value=s.join(",");try{"ddl-check"==t.fieldType&&(t.value.split(",").length==t.listOptions.length?$("#customcheckboxselectall"+a).prop("checked",!0):$("#customcheckboxselectall"+a).prop("checked",!1))}catch(n){}this.SearchData()},UpdateCheckedValues:function(e,t,a,s){if(1==a.target.checked)if(""!=e.value){var i=e.value.split(",");i.push(t),e.value=i.join(",")}else e.value=t;else{i=e.value.split(",");var n=i.indexOf(t);i.splice(n,1),e.value=i.join(",")}try{e.value.split(",").length==e.listOptions.length?$("#"+s).prop("checked",!0):$("#"+s).prop("checked",!1)}catch(o){}},CheckIfSelected:function(e,t){var a=e.value.split(","),s=a.indexOf(t);return s>-1},SetMinMaxValueForDatePicker:function(e,t){if("date-range"==e.fieldType)if("datefrom"==t&&null!=e.value&&""!=e.value){var a=g()(e.value,e.datePickerConfig.format);e.secondDatePickerConfig.minDate=new Date(a)}else if("dateto"==t&&null!=e.secondValue&&""!=e.secondValue){a=g()(e.secondValue,e.secondDatePickerConfig.format);e.datePickerConfig.maxDate=new Date(a)}},SearchData:function(){var e=this,t="";"CRM"!=e.modulename&&"HR"!=e.modulename&&"Expenses"!=e.modulename&&"FSM"!=e.modulename&&"ExpenseApproval"!=e.modulename||$.each(e.Fields,(function(a,s){switch(s.fieldType){case"text":if(s.value.length>0&&s.fieldSearchConditionName.length>0){t+=""!=$.trim(t)?" AND (":"(";var i="",n=s.value.replace(/'/g,"''");s.fieldSearchConditionName.forEach((function(e){i+=""!=$.trim(i)?" OR ":"(",i+=" "+e+" LIKE '%"+n+"%'"}));var o="";s.fieldSearchConditionName.length>1&&(o="/CRM/ContactListing"==e.$route.path?" OR "+s.fieldSearchConditionName.join(" %2B ' ' %2B ")+" LIKE '%"+n+"%'":" OR "+s.fieldSearchConditionName.join("+' '+")+" LIKE '%"+n+"%'"),i+=o+")",t+=i+")",s.isSearch=!0}else s.isSearch=!1;break;case"ddl-radio":case"radio":if(s.value.length>0&&s.fieldSearchConditionName.length>0){t+=""!=$.trim(t)?" AND (":"(";i="";s.fieldSearchConditionName.forEach((function(e){i+=""!=$.trim(i)?" OR ":"(",i+=" "+e+" = '"+s.value+"'"})),i+=")",t+=i+")",s.isSearch=!0}else s.isSearch=!1;break;case"ddl-check":case"checkbox":if(s.value.length>0&&s.fieldSearchConditionName.length>0){t+=""!=$.trim(t)?" AND (":"(";i="";var r=s.value.split(","),l="'"+r.join("','")+"'";s.fieldSearchConditionName.forEach((function(e){i+=""!=$.trim(i)?" OR ":"(",i+=" "+e+" in ("+l+")"})),i+=")",t+=i+")",s.isSearch=!0}else s.isSearch=!1;break;case"date":if(null!=s.value&&s.value.length>0&&s.fieldSearchConditionName.length>0){t+=""!=$.trim(t)?" AND (":"(";i="";var c=g()(s.value,s.datePickerConfig.format),d=c.format("YYYY-MM-DD");s.fieldSearchConditionName.forEach((function(e){i+=""!=$.trim(i)?" OR ":"(",i+=" CONVERT(DATE, "+e+") = '"+d+"'"})),i+=")",t+=i+")",s.isSearch=!0}else s.isSearch=!1;break;case"date-range":if((null!=s.value&&s.value.length>0||null!=s.secondValue&&s.secondValue.length>0)&&s.fieldSearchConditionName.length>0){t+=""!=$.trim(t)?" AND (":"(";i="";s.fieldSearchConditionName.forEach((function(e){i+=""!=$.trim(i)?" OR ":"(";var t=e.split("|"),a="";if(null!=s.value&&s.value.length>0){let e=g()(s.value,s.datePickerConfig.format),i=e.format("YYYY-MM-DD");a=" CONVERT(DATE, "+t[0]+") >= '"+i+"'"}if(null!=s.secondValue&&s.secondValue.length>0){let e=g()(s.secondValue,s.secondDatePickerConfig.format),i=e.format("YYYY-MM-DD");a+=""!=$.trim(a)?" AND ":"",a+=" CONVERT(DATE, "+t[1]+") <= '"+i+"'"}i+=a})),i+=")",t+=i+")",s.isSearch=!0}else s.isSearch=!1;break}})),this.$emit("SetLeftSearch",{PageNumber:1,searchCondition:t})},SearchOnEnter:function(e,t){void 0!=t.isNumeric&&1==t.isNumeric&&0==/[0-9]/.test(e.key)&&"Backspace"!=e.key&&e.preventDefault(),13==e.keyCode&&this.SearchData()},SelectAllRecords:function(e,t){if(1==t.target.checked){var a="";e.listOptions.forEach((function(e){a+=""==a?e.value:","+e.value})),e.value=a}else e.value=""},setActiveKey(e){let t=1;switch(e.id){case"aExpenseOverLimitReport":t=1;break;case"aExpenseReport":t=2;break;case"aReimbursementReport":t=3;break;default:break}this.$emit("SetLeftSearch",t)}}},x=_,E=(a("a090"),Object(u["a"])(x,v,f,!1,null,null,null)),b=E.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"listing"}},[a("div",{staticClass:"col-md-12 p-0"},[a("form",{attrs:{id:"frmReport"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Project"))+":")]),a("Multiselect",{attrs:{multiple:!0,placeholder:"Choose your Project","close-on-select":!1,"preselect-first":!0,"preserve-search":!0,"min-chars":1,"resolve-on-load":!1,delay:0,options:e.projects,"track-by":"value",object:!0,label:"label"},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,i=(t.search,t.isOpen);return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!i,expression:"!isOpen"}],staticClass:"multiselect__single"},[e._v(e._s(s.length)+" options selected")]):e._e()]}}]),model:{value:e.projectId,callback:function(t){e.projectId=t},expression:"projectId"}})],1)]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Category"))+":")]),a("Multiselect",{attrs:{multiple:!0,placeholder:"Choose your Category","close-on-select":!1,"preselect-first":!0,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,"preserve-search":!0,options:e.categories,"track-by":"value",label:"label",object:!0},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,i=(t.search,t.isOpen);return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!i,expression:"!isOpen"}],staticClass:"multiselect__single"},[e._v(e._s(s.length)+" options selected")]):e._e()]}}]),model:{value:e.categoryId,callback:function(t){e.categoryId=t},expression:"categoryId"}})],1)]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Trip"))+":")]),a("Multiselect",{attrs:{multiple:!0,placeholder:"Choose your Trip","close-on-select":!1,"preselect-first":!0,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,"preserve-search":!0,options:e.trips,"track-by":"value",label:"label",object:!0},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,i=(t.search,t.isOpen);return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!i,expression:"!isOpen"}],staticClass:"multiselect__single"},[e._v(e._s(s.length)+" options selected")]):e._e()]}}]),model:{value:e.TripId,callback:function(t){e.TripId=t},expression:"TripId"}})],1)]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("User"))+":")]),a("Multiselect",{attrs:{multiple:!0,placeholder:"Choose your User","close-on-select":!1,"preselect-first":!0,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,"preserve-search":!0,options:e.users,"track-by":"USER_ID",label:"USER_NAME",object:!0},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,i=(t.search,t.isOpen);return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!i,expression:"!isOpen"}],staticClass:"multiselect__single"},[e._v(e._s(s.length)+" options selected")]):e._e()]}}]),model:{value:e.UserId,callback:function(t){e.UserId=t},expression:"UserId"}})],1)]),a("div",{staticClass:"col-lg-4"},["CA"==e.UserType?a("div",{staticClass:"form-group"},[a("label",[e._v("Approver:")]),a("Multiselect",{attrs:{multiple:!0,placeholder:"Choose your Approver","close-on-select":!1,"preselect-first":!0,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,"preserve-search":!0,options:e.approve,"track-by":"value",label:"name",object:!0},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,i=(t.search,t.isOpen);return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!i,expression:"!isOpen"}],staticClass:"multiselect__single"},[e._v(e._s(s.length)+" options selected")]):e._e()]}}],null,!1,2615756560),model:{value:e.approverId,callback:function(t){e.approverId=t},expression:"approverId"}})],1):e._e()]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Status:")]),a("Multiselect",{attrs:{multiple:!0,placeholder:"Choose your Status","close-on-select":!1,"preselect-first":!0,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:e.status,"track-by":"value",label:"label",object:!0},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,i=(t.search,t.isOpen);return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!i,expression:"!isOpen"}],staticClass:"multiselect__single"},[e._v(e._s(s.length)+" options selected")]):e._e()]}}]),model:{value:e.StatusId,callback:function(t){e.StatusId=t},expression:"StatusId"}})],1)]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Title:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ExpenseTitle,expression:"ExpenseTitle"}],staticClass:"form-control",attrs:{type:"text",name:"ExpenseTitle",id:"ExpenseTitle"},domProps:{value:e.ExpenseTitle},on:{input:function(t){t.target.composing||(e.ExpenseTitle=t.target.value)}}}),a("span",{staticClass:"valid-feedback",attrs:{"data-valmsg-for":"ExpenseTitle","data-valmsg-replace":"true"}})])]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Date:")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"input-group mb-2"},[a("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5,attributes:e.attrs},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents,n=t.togglePopover;return[a("input",e._g({class:{"form-control date":!0},attrs:{placeholder:"From"},domProps:{value:s}},i)),a("div",{staticClass:"input-group-append",on:{click:function(e){return n()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}]),model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1)]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"input-group mb-2"},[a("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5,attributes:e.attrs},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents,n=t.togglePopover;return[a("input",e._g({class:{"form-control date":!0},attrs:{placeholder:"To"},domProps:{value:s}},i)),a("div",{staticClass:"input-group-append",on:{click:function(e){return n()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}]),model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)])])])]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v("GroupBy:")]),a("div",{staticClass:"pl-0 border-0"},[a("div",{staticClass:"custom-control custom-radio d-inline-block"},[a("input",{staticClass:"form-check-input",attrs:{"data-change-id":"no",name:"groupBy",id:"Project",checked:"checked",type:"radio",value:"Project"}}),a("label",{staticClass:"form-check-label",attrs:{for:"Project"}},[e._v(" "+e._s(e.$t("Project"))+" ")])]),a("div",{staticClass:"custom-control custom-radio d-inline-block"},[a("input",{staticClass:"form-check-input",attrs:{"data-change-id":"no",name:"groupBy",id:"Category",type:"radio",value:"Category"}}),a("label",{staticClass:"form-check-label",attrs:{for:"Category"}},[e._v(" "+e._s(e.$t("Category"))+" ")])]),a("div",{staticClass:"custom-control custom-radio d-inline-block"},[a("input",{staticClass:"form-check-input",attrs:{"data-change-id":"no",name:"groupBy",id:"Trip",type:"radio",value:"Trip"}}),a("label",{staticClass:"form-check-label",attrs:{for:"Trip"}},[e._v(" "+e._s(e.$t("Trip"))+" ")])])])])])]),a("div",{staticClass:"row flex-row-reverse mt-2"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success formbtn text-white mr-1",attrs:{href:"javascript:;",id:"aSearch",title:e.$t("Search"),name:"aSearch"},on:{click:e.onSearch}},[a("i",{staticClass:"fa fa-search pr-2"}),e._v(e._s(e.$t("Search")))]),a("a",{staticClass:"btn btn-danger formbtn widthhalf btnCancel",attrs:{href:"javascript:;",title:e.$t("Clear"),id:"aClear"},on:{click:e.onClear}},[a("i",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("ClearAll")))])])])])]),a("div",{staticClass:"row placeholder"},[a("div",{staticClass:"col-md-12 p-0"},[e.parameter.length>0?a("ReportViewer",{attrs:{parameter:e.parameter,reportPath:e.reportPath}}):e._e()],1)])])},y=[],A={components:{ReportViewer:h},data:function(){return{trips:[],categories:[],projects:[],status:[],users:[],ModuleName:"Expense",isexpenseReport:!0,projectId:[],categoryId:[],TripId:[],UserId:[],approve:[],approverId:[],StatusId:[],startDate:null,endDate:null,ExpenseTitle:"",attrs:[{key:"today",bar:!0,dates:new Date}],reportPath:null,parameter:[]}},created:async function(){this.UserType=this.GetUserInfo.UserType,await this.GetProjectByCompanyIdAndUserId(),await this.GetAllCategoriesByCompanyId(),await this.GetStatusList("Expense","en"),await this.ExpenseGetApproverListing(),await this.GetAllTripsByCompanyId(),await this.GetUsersByProjects()},methods:{CheckValid(e,t){var a=document.getElementById(e),s=a.getAttribute("name");return a.classList.remove("input-validation-error"),void 0!=s&&$("span[data-valmsg-for='"+s+"']").removeClass(t).addClass("field-validation-valid").html(""),""==this.ExpenseTitle?"yes":""},createStringArray(e,t){for(var a=[],s=0;s<e.length;s+=1)a.push(e[s][t]);return a.toString()},onSearch:function(){var e=this,t=e.CheckValid("ExpenseTitle","field-validation-error");if("no"!=t){var a=$("input:radio[name=groupBy]:checked").val(),s="",i="",o="",r="",l="",c="";e.projectId.forEach(e=>{s+=e.value+","}),e.categoryId.forEach(e=>{i+=e.value+","}),e.UserId.forEach(e=>{o+=e.value+","}),e.TripId.forEach(e=>{l+=e.value+","}),e.approverId.forEach(e=>{c+=e.value+","}),e.StatusId.forEach(e=>{r+=e.value+","});var d={reportName:"expensereport",moduleName:"Expense",projectIds:0==e.projectId.length?"":e.createStringArray(s,"value"),categoryIds:0==e.categoryId.length?"":e.createStringArray(i,"value"),userIds:0==e.UserId.length?"":e.createStringArray(o,"USER_ID"),StatusIds:0==e.StatusId.length?"":e.createStringArray(r,"value"),tripIds:0==e.TripId.length?"":e.createStringArray(l,"value"),approverIds:0==e.approverId.length?"":e.createStringArray(c,"value"),fDate:e.startDate,tDate:e.endDate,expTitle:e.ExpenseTitle,groupByVal:a},p=JSON.stringify(d);n["a"].ReportMain(p).then(t=>{e.reportPath=t.data.reportpath,e.parameter=t.data.parameters})}},onClear(){this.projectId=[],this.categoryId=[],this.TripId=[],this.UserId=[],this.approverId=[],this.StatusId=[],this.startDate="",this.endDate="",this.ExpenseTitle="",this.reportPath=null,this.parameter=[]},GetProjectByCompanyIdAndUserId:async function(){var e=this;await n["a"].GetProjectByCompanyIdAndUserId().then((function(t){e.projects=t.data.map(e=>({value:e.projectId,label:e.projectName}))}))},GetAllCategoriesByCompanyId:async function(){var e=this;await n["a"].GetAllCategoriesByCompanyId().then((function(t){e.categories=t.data.map(e=>({value:e.expensE_CATEGORY_ID,label:e.categorY_NAME}))}))},ExpenseGetApproverListing:async function(){let e={};var t=this;e["IsEncrptedId"]="",e["moduleName"]="Expenses",await n["a"].ExpenseGetUserListing(e).then((function(e){t.approve=e.data}))},GetStatusList:async function(e,t){var a=this,s="langCode="+t+"&statusType="+e+"&hasglobal=true";await n["a"].GetStatusList(s).then((function(e){a.status=e.data.map(e=>({value:e.STATUS_ID,label:e.STATUS}))}))},async GetAllTripsByCompanyId(){var e=this;await n["a"].GettTripListingddl().then((function(t){e.trips=t.data.map(e=>({value:e.TRIP_ID,label:e.TRIP_NAME}))}))},async GetUsersByProjects(){var e=this,t="projectIds=&moduleName=Project";await n["a"].GetUsersByProjectIds(t).then((function(t){e.users=t.data}))}}},k=A,w=Object(u["a"])(k,S,y,!1,null,null,null),D=w.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"listing"}},[a("div",{staticClass:"col-md-12 p-0"},[a("form",{attrs:{id:"frmReport",method:"post",target:"iReport","asp-controller":"ReportCommon","asp-action":"ReportMain"}},[a("input",{attrs:{type:"hidden",id:"Projects",name:"projectIds",value:""}}),a("input",{attrs:{type:"hidden",id:"Users",name:"userIds",value:""}}),a("input",{attrs:{type:"hidden",id:"Approvers",name:"approverIds",value:""}}),a("input",{attrs:{type:"hidden",id:"hdnmodulename",name:"moduleName",value:"Expense"}}),a("input",{attrs:{type:"hidden",id:"reportName",name:"reportName",value:"reimbursementreport"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Project"))+":")]),a("Multiselect",{attrs:{multiple:!0,placeholder:"Choose your Project","close-on-select":!1,"preselect-first":!0,"min-chars":1,"resolve-on-load":!1,delay:0,"preserve-search":!0,options:e.projects,"track-by":"value",object:!0,label:"label"},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,i=(t.search,t.isOpen);return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!i,expression:"!isOpen"}],staticClass:"multiselect__single"},[e._v(e._s(s.length)+" options selected")]):e._e()]}}]),model:{value:e.projectId,callback:function(t){e.projectId=t},expression:"projectId"}})],1)]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Approver:")]),a("Multiselect",{attrs:{multiple:!0,"preselect-first":!0,placeholder:"Choose your Approver","close-on-select":!1,"preserve-search":!0,"min-chars":1,options:e.approvers,"track-by":"value",label:"name",object:!0},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,i=(t.search,t.isOpen);return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!i,expression:"!isOpen"}],staticClass:"multiselect__single"},[e._v(e._s(s.length)+" options selected")]):e._e()]}}]),model:{value:e.approverId,callback:function(t){e.approverId=t},expression:"approverId"}})],1)]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("User"))+":")]),a("Multiselect",{attrs:{multiple:!0,placeholder:"Choose your User","close-on-select":!1,"preselect-first":!0,"min-chars":1,"resolve-on-load":!1,delay:0,"preserve-search":!0,options:e.users,"track-by":"name",label:"name",object:!0},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.values,i=(t.search,t.isOpen);return[s.length?a("span",{directives:[{name:"show",rawName:"v-show",value:!i,expression:"!isOpen"}],staticClass:"multiselect__single"},[e._v(e._s(s.length)+" options selected")]):e._e()]}}]),model:{value:e.UserId,callback:function(t){e.UserId=t},expression:"UserId"}})],1)]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("GroupBy"))+":")]),a("div",{staticClass:"pl-0 border-0"},[a("div",{staticClass:"custom-control custom-radio d-inline-block"},[a("input",{staticClass:"form-check-input",attrs:{"data-change-id":"no",name:"groupBy",id:"Company",checked:"checked",type:"radio",value:"Company"}}),a("label",{staticClass:"form-check-label",attrs:{for:"Company"}},[e._v(" "+e._s(e.$t("Company"))+" ")])]),a("div",{staticClass:"custom-control custom-radio d-inline-block"},[a("input",{staticClass:"form-check-input",attrs:{"data-change-id":"no",name:"groupBy",id:"Client",type:"radio",value:"Client"}}),a("label",{staticClass:"form-check-label",attrs:{for:"Client"}},[e._v(" "+e._s(e.$t("Client"))+" ")])])])])]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Date:")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"input-group mb-2"},[a("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5,attributes:e.attrs},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents,n=t.togglePopover;return[a("input",e._g({class:{"form-control date":!0},attrs:{placeholder:"From"},domProps:{value:s}},i)),a("div",{staticClass:"input-group-append",on:{click:function(e){return n()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}]),model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})],1)]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"input-group mb-2"},[a("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5,attributes:e.attrs},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents,n=t.togglePopover;return[a("input",e._g({class:{"form-control date":!0},attrs:{placeholder:"To"},domProps:{value:s}},i)),a("div",{staticClass:"input-group-append",on:{click:function(e){return n()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}]),model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}})],1)])])])])]),a("div",{staticClass:"row flex-row-reverse mt-2"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success formbtn text-white mr-1",attrs:{href:"javascript:;",id:"aSearch",title:e.$t("Search"),name:"aSearch"},on:{click:e.onSearch}},[a("i",{staticClass:"fa fa-search pr-2"}),e._v(e._s(e.$t("Search")))]),a("a",{staticClass:"btn btn-danger formbtn widthhalf btnCancel",attrs:{href:"javascript:;",title:e.$t("Clear"),id:"aClear"},on:{click:e.onClear}},[a("i",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("ClearAll")))])])])])]),a("div",{staticClass:"row placeholder"},[a("div",{staticClass:"col-md-12 p-0"},[e.parameter.length>0?a("ReportViewer",{attrs:{parameter:e.parameter,reportPath:e.reportPath}}):e._e()],1)])])},I=[],N={components:{ReportViewer:h},data:function(){return{projects:[],ModuleName:"Expense",projectId:[],approvers:[],approverId:[],users:[],UserId:[],fromDate:null,toDate:null,attrs:[{key:"today",bar:!0,dates:new Date}],reportPath:null,parameter:[]}},created:async function(){await this.GetProjectByCompanyIdAndUserId(),await this.GetApproverListing(),await this.GetUserListing()},methods:{createStringArray(e,t){for(var a=[],s=0;s<e.length;s+=1)a.push(e[s][t]);return a.toString()},onSearch:function(){var e=this,t=$("input:radio[name=groupBy]:checked").val(),a="",s="",i="";e.projectId.forEach(e=>{a+=e.value+","}),e.UserId.forEach(e=>{s+=e.value+","}),e.approverId.forEach(e=>{i+=e.value+","});var o={reportName:"reimbursementreport",moduleName:"Expense",projectIds:0==e.projectId.length?"":e.createStringArray(a,"value"),userIds:0==e.UserId.length?"":e.createStringArray(s,"value"),fDate:e.fromDate,approverIds:0==e.approverId.length?"":e.createStringArray(i,"value"),tDate:e.toDate,groupByVal:t},r=JSON.stringify(o);n["a"].ReportMain(r).then(t=>{e.reportPath=t.data.reportpath,e.parameter=t.data.parameters})},onClear(){this.projectId=[],this.UserId=[],this.approverId=[],this.fromDate="",this.toDate="",this.reportPath=null,this.parameter=[]},async GetProjectByCompanyIdAndUserId(){var e=this;await n["a"].GetProjectByCompanyIdAndUserId().then((function(t){e.projects=t.data.map(e=>({value:e.projectId,label:e.projectName}))}))},GetApproverListing:async function(){let e={};var t=this;e["IsEncrptedId"]="",e["moduleName"]="Expenses",await n["a"].ExpenseGetUserListing(e).then((function(e){t.approvers=e.data}))},GetUserListing:async function(){let e={};var t=this;e["IsEncrptedId"]="",e["moduleName"]="Project",await n["a"].ExpenseGetUserListing(e).then((function(e){t.users=e.data}))}}},P=N,F=Object(u["a"])(P,T,I,!1,null,null,null),R=F.exports,L={components:{leftsearch:b,ReportViewer:h,ExpenseReport:D,ReimbursementReport:R},data:function(){return{activeKey:1,HeaderText:"Expense Reports",categories:[],projects:[],SearchFields:r.leftsearchSchema,ModuleName:"Expense",dtFrom:"",dtTO:"",TabName:"Expense Over Limit",isexpenseOverLimit:!0,projectId:[],categoryId:[],attrs:[{key:"today",bar:!0,dates:new Date}],reportPath:null,parameter:[]}},created:async function(){await this.GetProjectByCompanyIdAndUserId(),await this.GetAllCategoriesByCompanyId()},methods:{SetActiveKey:function(e){this.activeKey=e,this.TabName=1==e?"Expense Over Limit":2==e?"Expense Report":"Reimbursements"},onSearch:function(){var e=this,t="",a="";e.projectId.forEach(e=>{t+=e.value+","}),e.categoryId.forEach(e=>{a+=e.value+","});var s={reportName:"expenseoverlimit",moduleName:"Expense",projectIds:""+t,categoryIds:""+a,dateFrom:e.$options.filters.formatDatee(e.dtFrom),dateTo:e.$options.filters.formatDatee(e.dtTO),expenseOverLimit:e.isexpenseOverLimit},i=JSON.stringify(s);n["a"].ReportMain(i).then(t=>{e.reportPath=t.data.reportpath,e.parameter=t.data.parameters})},onClear:function(){this.reportPath=null,this.parameter=[],this.dtFrom="",this.dtTO="",this.categoryId=[],this.projectId=[],this.isexpenseOverLimit=!1},GetProjectByCompanyIdAndUserId:async function(){var e=this;await n["a"].GetProjectByCompanyIdAndUserId().then((function(t){e.projects=t.data.map(e=>({value:e.projectId,label:e.projectName}))}))},GetAllCategoriesByCompanyId:async function(){var e=this;await n["a"].GetAllCategoriesByCompanyId().then((function(t){e.categories=t.data.map(e=>({value:e.expensE_CATEGORY_ID,label:e.categorY_NAME}))}))},showCheckboxes(){var e=document.getElementById("checkboxes");expanded?(e.style.display="none",expanded=!1):(e.style.display="block",expanded=!0)}}},O=L,M=Object(u["a"])(O,s,i,!1,null,null,null);t["default"]=M.exports},"65cd":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("tg-list",{directives:[{name:"show",rawName:"v-show",value:e.IsExpenseListView,expression:"IsExpenseListView"}],attrs:{listType:["List","Card"],IsShowAction:!0,showCheckBox:!0,ModuleName:"Expenses",SubModuleCode:"Expenses",IdentityColumn:"expense_id",HeaderText:e.$t("Expense"),ListData:e.ExpenseData,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,KanbanDataCallBackFunction:e.FetchDataKanban,SortExp:e.SortExp,SortBy:e.SortBy,LegendArray:e.LegendArray,NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(t){var s=t.data;return["status_id"==s.column.COLUMN_NAME?[a("a",{staticClass:"inactive-disabled"},["ACT"!=s.row.status_code&&"EXP_APPR_PEND"!=s.row.status_code&&"EXP_SEND_FOR_CORRECTION"!=s.row.status_code?a("span",{class:e.getStatusClassList(s.row.status_code,"status_code")},[e._v(" "+e._s(s.row[s.column.COLUMN_NAME])+" ")]):e._e(),"EXP_APPR_PEND"==s.row.status_code?a("span",{class:e.getStatusClassList(s.row.status_code,"status_code")},[e._v(" "+e._s(e.$t("ApprovalPending"))+" ")]):e._e(),"ACT"==s.row.status_code?a("span",{class:e.getStatusClassList(s.row.status_code,"status_code")},[e._v(" "+e._s(e.$t("Draft"))+" ")]):e._e(),"EXP_SEND_FOR_CORRECTION"==s.row.status_code?a("span",{class:e.getStatusClassList(s.row.status_code,"status_code")},[e._v(" "+e._s(e.$t("SentForCorrection"))+" ")]):e._e()])]:e._e(),"expense_amount"==s.column.COLUMN_NAME?[e._v(" "+e._s(e.convertDecimalValueInFormat(s.row.expense_amount)+" "+s.row.Expense_amount_iso_code)+" ")]:e._e(),"CONVERSION_AMOUNT"==s.column.COLUMN_NAME?[e._v(" "+e._s(e.convertDecimalValueInFormat(s.row.CONVERSION_AMOUNT)+" "+s.row.convertion_amount_iso_code)+" ")]:e._e()]}},{key:"customcard",fn:function(t){var s=t.data;return[a("div",{staticClass:"card-box expense-card text-center pb-2",class:e.getStatusClassCard(s.row.status_code)},[a("div",{staticClass:"expense-card-header"},[a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{staticClass:"chkItems",staticStyle:{display:"none"},attrs:{type:"checkbox",disabled:s.row.isCheckBoxDisabled,id:"chk_11"},domProps:{value:s.row.expense_id},on:{change:function(t){return e.OnChange()}}}),a("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chk_11"}})]),a("span",{staticClass:"expense-icon"},[a("i",{staticClass:"fa  fa-file-text-o"})]),a("a",{staticClass:"text-truncate expense-title",staticStyle:{cursor:"default"},attrs:{title:"",value:s.row.expense_id,"data-toggle-tooltip":"tooltip","data-original-title":"gfhghgfh"}},[e._v(e._s(s.row.expense_title))])]),a("div",{staticClass:"card-detail-main"},[a("div",{staticClass:"expense-project-date"},[a("span",[e._v(e._s(s.row.project_id))]),a("span",[e._v(e._s(e.$options.filters.formatDate(s.row.expense_date)))]),e._v(e._s(s.row.rownumber)+" ")])]),a("div",{staticClass:"expense-amount"},[a("div",{staticClass:"Task"},[a("span",{staticClass:"t-title"},[e._v(" "+e._s(e.convertDecimalValueInFormat(s.row.expense_amount)+" "+s.row.Expense_amount_iso_code))])])]),a("a",{class:{"read-more-content":!0,hide:1==e.ShowMoreFalse},attrs:{id:"a"+s.row.rownumber,href:"javascript:;"},on:{click:function(t){return e.ShowMore("showdiv"+s.row.rownumber)}}},[e._v(e._s(e.$t("More")))]),a("div",{class:{"read-more-content":!0,hide:0==e.ShowMoreFalse},attrs:{id:"showdiv"+s.row.rownumber}},[a("div",{staticClass:"expense-project-date border-top float-left"},[a("span",[a("strong",{staticClass:"w-100 d-block"},[e._v(e._s(e.$t("expense_category_id")))]),e._v(e._s(s.row.expense_category_id))]),a("span",[a("strong",{staticClass:"w-100 d-block"},[e._v(e._s(e.$t("trip_id")))]),e._v(e._s(s.row.trip_id))])]),a("div",{staticClass:"text-center",attrs:{id:"showdiv"+s.row.rownumber}},[a("span",{staticClass:"border-0"},[a("strong",{staticClass:"w-100 d-block"},[e._v(e._s(e.$t("OrignalConversionAmount")))]),e._v(e._s(e.convertDecimalValueInFormat(s.row.CONVERSION_AMOUNT)+" "+s.row.convertion_amount_iso_code))])]),a("a",{class:{"read-more-hide":!0,"":1==e.ShowMoreFalse},attrs:{id:"cardMoreDataLess",href:"javascript:;"},on:{click:function(t){return e.ShowLess("showdiv"+s.row.rownumber)}}},[e._v(e._s(e.$t("Less")))])]),a("div",{staticClass:"verticle-action"},[a("em",{staticClass:"fa fa-ellipsis-v action_icon",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.openActionIcon(t)}}}),a("span",{staticClass:"action-list-box",staticStyle:{width:"240px",display:"none"}},[a("span",{staticClass:"list-actions fsm-list",staticStyle:{"padding-left":"0"},attrs:{id:"action-list"}},["ACT"==s.row.status_code||"EXP_SEND_FOR_CORRECTION"==s.row.status_code||"yes"==e.DisableExpense&&"Timesheet"==e.approvalTypeForTime?a("a",{staticClass:"update actions-onclick",on:{click:function(t){return e.ExpenseEdit(s.row.expense_id)}}},[a("em",{staticClass:"fa fa-pencil action-icon"}),a("span",{staticClass:"text"},[e._v(e._s(e.$t("Edit")))])]):e._e(),s.row.filescount>0?a("a",{staticClass:"update actions-onclick",class:{disabled:0==s.row.filescount},attrs:{href:"javascript:;"},on:{click:function(t){return e.OpenFileModal(s.row)}}},[a("em",{staticClass:"fa fa-eye action-icon"}),a("span",{staticClass:"text"},[e._v(e._s(e.$t("ViewAttachedFile")))])]):e._e(),0!=s.row.commentscount||("CA"==e.usertype||"PM"==e.usertype||"NU"==e.usertype)&&"ACT"!=s.row.status_code?a("a",{staticClass:"update actions-onclick",on:{click:function(t){return e.openAddNewEvent(s.row)}}},[a("em",{staticClass:"fa fa-comment action-icon"}),a("span",{staticClass:"text"},[e._v(e._s(e.$t("Comments")))])]):e._e(),"ACT"==s.row.status_code||"EXP_SEND_FOR_CORRECTION"==s.row.status_code||"yes"==e.DisableExpense&&"Timesheet"==e.approvalTypeForTime?a("a",{staticClass:"actions-onclick",attrs:{href:"javascript:;"},on:{click:function(t){return e.SendForApproval(s.row)}}},[a("em",{staticClass:"fa fa-file text-warning action-icon"}),a("span",{staticClass:"text"},[e._v(e._s(e.$t("SendForApprovalTitle")))])]):e._e(),a("em",{staticClass:"fa fa-times close close-action",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.closeActionIcon(t)}}})])])])])]}}])}),e.showFileModal?a("ExpenseAttachents",{attrs:{expenseid:e.expid,code:e.statuscode},on:{CloseExpenseAttachments:e.CloseExpenseAttachments}}):e._e(),e.showCommentModal?a("ExpenseComments",{attrs:{access:e.access,expenseid:e.expid,CommentHeader:e.CommentHeader,isSingleCommentforMultipleExpenses:e.isSingleCommentforMultipleExpenses,statuscode:e.statuscode,visibility:e.visibility},on:{CloseExpenseComments:e.CloseExpenseComments}}):e._e()],1)},i=[],n=a("9769");let o=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add Expense",iconClass:"fa fa-plus",callbackfunction:"openaddExpense",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"AddExpense"},{title:"Send For Approval",iconClass:"fa fa-send",callbackfunction:"ExpensesSendForApproval",additionalClass:"",isdisabled:!0,isvisible:!0,id:"SendForApproval"},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],r=[{fieldName:"Project",fieldType:"ddl-check",fieldIcon:"fa-file",fieldSearchConditionName:["PRO.PROJECT_ID"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["Status.status_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"DATE",fieldType:"date-range",fieldIcon:"fa-calendar",fieldSearchConditionName:["expense_date|expense_date"],isSearch:!1,datePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:!1,maxDate:!1,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:!1,maxDate:!1,widgetPositioning:{horizontal:"right",vertical:"bottom"}},value:"",secondValue:"",listOptions:[]}],l=[{title:"Edit Expense",icon:"fa fa-pencil action-icon",additionalSpan:"",callbackfunction:"Edit"},{title:"View Files",href:"javascript:void(0)",callbackfunction:"OpenFileModal",icon:"fa fa-eye text-primary action-icon",additionalSpan:""},{title:"Comments",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-comment",additionalSpan:""},{title:"Send For Approval",callbackfunction:"SendForApproval",href:"javascript:void(0)",icon:"fa fa-file text-warning action-icon",additionalSpan:""}];function c(e,t,a){var s=e;let i={};i["moduleName"]=t,i["type"]=a,n["a"].GetDDLData(i).then((function(e){var t=e.data;if(null!=t)return"EXPENSE_PROJECT"==a?(s.leftSearchFields[0].listOptions=t.DATA,s.ExpenseProjectList=t.DATA,s.ExpenseProjectList):(s.leftSearchFields[1].listOptions=t.DATA,s.ExpenseStatusList=t.DATA,s.ExpenseStatusList)}))}var d={buttons:o,leftsearchSchema:r,listActions:l,bindleftCommonSearchdropdown:c},p=a("5333"),u=a("9d1d"),m={components:{ExpenseAttachents:p["a"],ExpenseComments:u["a"]},data(){return{isSingleCommentforMultipleExpenses:null,CommentHeader:"",isLoading:!1,searchCondition:"",TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",Headers:[],StatusList:[],ExpenseData:[],cardViewData:[],kanbanViewData:[],listheaderbuttons:d.buttons,leftSearchFields:d.leftsearchSchema,noRecord:!1,CurrentPage:1,TotalPages:0,IsExpenseListView:!0,IsExpenseListViewHide:!1,IsExpenseCardView:!1,IsExpenseCardViewHide:!0,IsExpenseKanbanView:!1,IsExpenseKanbanViewHide:!0,listActions:d.listActions,showFileModal:!1,expid:"",statuscode:"",ExpenseStatusList:null,conditionForInstantSearch:"",showCommentModal:!1,showCommentModal:!1,StatusListForListing:[],widgets:[{icon:"fa fa-dollar",value:"12",name:"Total Expenses",class:"one_wid"},{icon:"fa fa-dollar",value:"7",name:"Approved Expenses",class:"two_wid"},{icon:"fa fa-clock-o",value:"5",name:"Approval Pending",class:"three_wid"},{icon:"fa fa-reply",value:"1",name:"Send for Correction",class:"four_wid"}],LegendArray:[{class:"",backgroundColor:"#17a2b8",name:"Draft"},{class:"legend-Progress",backgroundColor:"",name:"Approved"},{class:"legend-pending",backgroundColor:"",name:"Pending"},{class:"",backgroundColor:"#fe6847",name:"SendForCorrection"},{class:"",backgroundColor:"#ee1313",name:"Rejected"}],ShowMoreFalse:!1,visibility:0,access:1,DisableExpense:"",approvalTypeForTime:""}},created:function(){var e=this;e.usertype=e.GetUserInfo.UserType,e.companyId=e.GetUserInfo.CompanyId,e.GetExpenseStatusList(),e.onStatusList(),e.FetchData(),e.getStatuslistForListing("Expense","en"),d.bindleftCommonSearchdropdown(e,"Expense","EXPENSE_PROJECT"),d.bindleftCommonSearchdropdown(e,"Expense","EXPENSE_STATUS"),e.GetConfigurationValue("PerDiemAllowed"),e.GetConfigurationValueKey("ApprovalTypeForTime")},updated:function(){this.BindActionButtonEvent(),this.SetScrolbar("dark-thick","","filterscroll_leftsearch")},methods:{openActionIcon(e){e.target.nextSibling.removeAttribute("style"),e.target.nextSibling.setAttribute("style","width:240px;"),e.target.nextSibling.style.display="block"},closeActionIcon(e){e.target.nextSibling.style.display="none"},getStatusClassList:function(e){var t="";switch(e){case"ACT":t="px-2 text-center text-white d-block bg-info";break;case"EXP_APPROVED":t="px-2 text-center text-white d-block bg-success";break;case"EXP_APPR_PEND":t="px-2 text-center text-white d-block bg-warning";break;case"EXP_REJECTED":t="px-2 text-center text-white d-block bg-danger";break;case"EXP_SEND_FOR_CORRECTION":t="px-2 text-center text-white d-block bg-orange";break;default:t=""}return t},getStatusClassCard:function(e){var t="";switch(e){case"ACT":t="ex-blue-bg-light";break;case"EXP_APPROVED":t="ex-green-bg-light";break;case"EXP_APPR_PEND":t="ex-yellow-bg-light";break;case"EXP_REJECTED":t="ex-red-bg-light";break;case"EXP_SEND_FOR_CORRECTION":t="ex-orange-bg-light";break;case"Draft":t="ex-blue-bg-light";break;default:t=""}return t},DisableInputBox:function(e){var t="";switch(e){case"Approved":case"Active":case"ApprovalPending":case"Rejected":t="disbaled";break;case"SentForCorrection":case"Draft":t="disbaled";break;default:t=""}return t},updateURLParameter(e,t,a){var s="",i=e.split("?"),n=i[0],o=i[1],r="";if(o){i=o.split("&");for(var l=0;l<i.length;l++)i[l].split("=")[0]!=t&&(s+=r+i[l],r="&")}var c=r+""+t+"="+a;return n+"?"+s+c},ShowMore(e){$("#"+e).show(),$("#a"+e.split("v")[1]).hide()},ShowLess(e){$("#"+e).hide(),$("#a"+e.split("v")[1]).show()},FetchData:function(){var e=this;if(e.IsExpenseKanbanView)return e.FetchDataKanban(),!1;e.isLoading=!0;const t=this.getRequestParams(this.sortBy,this.sortExp,this.pageSize,this.pageNumber,this.isPaged,this.searchcondition);t.pageSize=e.PageSize,t.pageNumber=e.PageNumber,t.searchCondition=e.searchCondition,e.PageNumber?t.pageNumber=e.PageNumber:e.PageNumber=t.pageNumber=1,"undefined"!=typeof e.isPaged?t.isPaged=e.isPaged:e.isPaged=t.isPaged=1,t.isPaged=e.isPaged,t.sortBy=e.SortBy,t.sortExp=e.SortExp;var a="";e.isBlank(e.searchCondition)||(a+=e.searchCondition),e.isBlank(e.conditionForInstantSearch)||(a+=e.isBlank(e.searchCondition)?e.conditionForInstantSearch:" AND "+e.conditionForInstantSearch),""!=a&&(t.searchCondition=a),n["a"].ExpenseListing(t).then((function(t){e.isLoading=!1,null!=t.data?(e.Headers=t.data.schema,e.Headers.forEach(e=>{e.settings=null,"status_id"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Status",e.settings={isInSlot:!0,isForTag:!0}),"expense_amount"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Amount",e.settings={isInSlot:!0}),"expense_category_id"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Expense Category"),"CONVERSION_AMOUNT"==e.COLUMN_NAME&&(e.DATA_TYPE="string",e.settings={isInSlot:!0})}),t.data.data.length>0?(e.ExpenseData=[],e.TotalRecords=0,e.ExpenseData=t.data.data,e.ExpenseData.forEach(e=>{e.isCheckBoxDisabled=!1,"ACT"!=e.status_code&&"EXP_SEND_FOR_CORRECTION"!=e.status_code&&(e.isCheckBoxDisabled=!0)}),e.cardViewData=e.ExpenseData,e.TotalRecords=t.data.data[0].total_records,0==t.data.total_expenses_widget.length?e.TotalExpenseWidget=0:e.widgets[0].value=e.convertDecimalValueInFormat(t.data.total_expenses_widget[0]),0==t.data.approved_expense_widget.length?e.ApprovedExpenseWidget=0:e.widgets[1].value=e.convertDecimalValueInFormat(t.data.approved_expense_widget[0]),0==t.data.approval_pending_widget.length?e.PendingExpenseWidget=0:e.widgets[2].value=t.data.approval_pending_widget[0],0==t.data.send_for_correction_widget.length?e.SendForCorrectionWidget=0:e.widgets[3].value=t.data.send_for_correction_widget[0],$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='DeleteItem']").removeClass("enable").addClass("disabled"),$("[id^='aCommanApproval']").removeClass("enable").addClass("disabled"),$(".close-action_cv").parent().parent(".action-list-box").animate({width:"0px"},200),e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.noRecord=!1):(e.noRecord=!0,e.ExpenseData=[],e.TotalRecords=0)):(e.noRecord=!0,e.ExpenseData=[],e.Headers=[],e.TotalRecords=0),setTimeout((function(){e.CheckBoxBootstrap()}),100),setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500)}))},getStatuslistForListing:function(e,t){var a=this,s="langCode="+t+"&statusType="+e+"&hasglobal=true";n["a"].statusdropdown(s).then((function(e){if("Success"==e.data.status){var t=e.data.result;a.StatusListForListing=t.data}}))},getRequestParams:function(e,t,a,s,i,n){let o={};return s&&(o["pageNumber"]=s),n&&(o["searchcondition"]=n),i&&(o["isPaged"]=i),e&&(o["sortBy"]=e),t&&(o["sortExp"]=t),a&&(o["pageSize"]=a),o},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(s=>{let i={...s};switch(i.title){case"Edit Expense":"ACT"==e.status_code||"EXP_SEND_FOR_CORRECTION"==e.status_code?"yes"==this.DisableExpense&&"Timesheet"==this.approvalTypeForTime?i.isVisible=!1:i.isVisible=!0:i.isVisible=!1;break;case"View Files":i.isVisible=0!=e.filescount;break;case"Comments":i.isVisible=0!=e.commentscount||("CA"==t.usertype||"PM"==t.usertype||"NU"==t.usertype)&&"ACT"!=e.status_code;break;case"Send For Approval":"ACT"==e.status_code||"EXP_SEND_FOR_CORRECTION"==e.status_code?"yes"==this.DisableExpense&&"Timesheet"==this.approvalTypeForTime?i.isVisible=!1:i.isVisible=!0:i.isVisible=!1;break;default:i.isVisible=!0}a.push(i)}),a},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.FetchData()},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},actionButtonClick:function(e,t){switch(e){case"Edit":this.ExpenseEdit(t.expense_id);break;case"OpenFileModal":this.OpenFileModal(t);break;case"openAddNewEvent":this.openAddNewEvent(t);break;case"SendForApproval":this.SendForApproval(t);break}},OpenFileModal:function(e){this.showFileModal=!0,this.expid=e.expense_id,this.statuscode=e.status_code},CloseExpenseAttachments:function(){this.showFileModal=!1},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.FetchData(),$("#"+e+"  span:first-child").attr("class",t)},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"openaddExpense":this.openaddExpense();break;case"setTourGuideSteps":this.setTourGuideSteps(0);break;case"ExpensesSendForApproval":this.CommonApproval();break;case"commonDeleteData":this.commonDeleteData();break}},openaddExpense:function(){this.$router.push({path:"/Expenses/Add/0",params:{id:"0"}})},OnChange:function(){var e=$(".chkItems:checked").not("[id^='chkAll']").length;e>0?($("#SendForApproval").removeClass("disabled"),$("#DeleteMultiple").removeClass("disabled")):($("#SendForApproval").addClass("disabled"),$("#DeleteMultiple").addClass("disabled"))},FetchDataKanban:function(e){var t=this,a="pagesize="+this.PageSize+"&pagenumber="+this.PageNumber+"&sortBy="+this.SortBy+"&sortExp="+this.SortExp,s="";this.isBlank(this.searchCondition)||(a=a+"&searchCondition="+this.searchCondition),this.isBlank(this.conditionForInstantSearch)||(s+=this.isBlank(this.searchCondition)?this.conditionForInstantSearch:" AND "+this.conditionForInstantSearch),""!=s&&(a=a+"&searchCondition="+s),n["a"].ExpenseKanbanListing(a).then((function(e){null!=e.data?(e.data.schema.forEach(e=>{"status_id"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Status")}),"undefined"!=typeof e.data.data&&(t.TotalRecords=e.data.total_records[0],t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1,0==e.data.approved_expense.length?t.ApprovedExpense=0:t.ApprovedExpense=e.data.approved_expense[0],0==e.data.pending_expense.length?t.PendingExpense=0:t.PendingExpense=e.data.pending_expense[0],0==e.data.active_expense.length?t.ActiveExpense=0:t.ActiveExpense=e.data.active_expense[0],0==e.data.send_for_correction.length?t.SendForCorrectionExpense=0:t.SendForCorrectionExpense=e.data.send_for_correction[0],0==e.data.rejected_expense.length?t.RejectedExpense=0:t.RejectedExpense=e.data.rejected_expense[0],0==e.data.total_expenses_widget.length?t.TotalExpenseWidget=0:t.TotalExpenseWidget=e.data.total_expenses_widget[0],0==e.data.approved_expense_widget.length?t.ApprovedExpenseWidget=0:t.ApprovedExpenseWidget=e.data.approved_expense_widget[0],0==e.data.approval_pending_widget.length?t.PendingExpenseWidget=0:t.PendingExpenseWidget=e.data.approval_pending_widget[0],0==e.data.send_for_correction_widget.length?t.SendForCorrectionWidget=0:t.SendForCorrectionWidget=e.data.send_for_correction_widget[0]),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='DeleteItem']").removeClass("enable").addClass("disabled"),$("[id^='aCommanApproval']").removeClass("enable").addClass("disabled")):(t.ApprovedExpense=0,t.PendingExpense=0,t.SendForCorrectionExpense=0,t.RejectedExpense=0),t.MaxCount=Math.max(t.ApprovedExpense,t.PendingExpense,t.SendForCorrectionExpense,t.RejectedExpense),null!=e.data&&e.data.data.length>0?(t.Headers=e.data.schema,"undefined"!=typeof e.data.data?(t.ExpenseData=e.data.data,parseInt($("#hdfStartIndex").val(),10)>1?t.kanbanViewData.push.apply(t.kanbanViewData,t.ExpenseData):t.kanbanViewData=t.ExpenseData,setTimeout("CheckBoxBootstrap()",100),setTimeout("ResponsiveDataTable('tablelistingdata')",500),t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1):(t.ExpenseData=[],t.noRecord=!0,t.kanbanViewData=[],t.TotalRecords=0)):(t.TotalRecords<=0&&(t.ExpenseData=[]),t.kanbanViewData=[],t.Headers=e.data.schema)}))},commonDeleteData:function(e){var t=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Expenses"),(function(){var e={ids:a,moduleName:"Expenses",subModuleCode:"EM_EXPENSE"},s=JSON.stringify(e);n["a"].CommonDeleteData(s).then((function(e){"Success"==e.data[0].Status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='DeleteItem']").removeClass("enable").addClass("disabled"),$("[id^='aCommanApproval']").removeClass("enable").addClass("disabled"),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Expense")]),"Success",!0,t.$t("Alert")),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<0&&(t.PageNumber=1),t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("Expense")]),"failure",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("Selectanyrecordtodelete"),"warning",!0,t.$t("Alert"))},CommonApproval:function(e){var t=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0&&t.confirmR(t.$t("ConfirmApproval"),!0,"Confirm",(function(){var e="ExpenseId="+a;n["a"].SendForApproval(e).then((function(e){200==e.status?t.FetchData():t.ShowAlert(t.$t("SelectAnyExpenseToApproval"),"warning",!0,t.$t("Alert")),t.isLoading=!1}))}))},SendForApproval:function(e){var t=this;t.confirmR(t.$t("ConfirmApproval"),!0,"Confirm",(function(){var a="ExpenseId="+e.expense_id;n["a"].SendForApproval(a).then((function(e){200==e.status&&(t.ShowAlert(t.$t("ExpenseApproveSendForApproval",[t.$t("SendForApproval")]),"success",!0,t.$t("Alert")),t.FetchData())}))}))},openAddNewEvent:function(e){this.CommentHeader="Comment",this.isSingleCommentforMultipleExpenses=0,this.showCommentModal=!0,this.expid=String(e.expense_id),this.statuscode=e.status_id,this.visibility=1,this.access=0},CloseExpenseComments:function(){this.showCommentModal=!1},GetExpenseStatusList:function(){var e=this,t="moduleName=Expense&type=EXPENSE_STATUS";n["a"].getDDLData(t).then((function(t){var a=t.data;null!=a&&(e.leftSearchFields[1].listOptions=a.DATA,e.ExpenseStatusList=a.DATA)}))},onStatusList:function(){var e=this,t=`langCode=en&companyId=${this.companyId}&statusType=Expense&hasglobal=true`;n["a"].GetStatusDDLData(t).then((function(t){if("Success"==t.data.status){var a=t.data.result;e.StatusList=a.data,e.activeData=$.grep(e.StatusList,(function(e,t){return"ACT"==e.STATUS_CODE})),e.ApprovedData=$.grep(e.StatusList,(function(e,t){return"EXP_APPROVED"==e.STATUS_CODE}))}}))},GetConfigurationValue:function(e){var t="ConfigurationValueByKey="+e;n["a"].GetConfigurationValue(t).then(e=>{this.DisableExpense=e.data.CONFIG_DATA_VALUE})},GetConfigurationValueKey:function(e){var t="ConfigurationValueByKey="+e;n["a"].GetConfigurationValue(t).then(e=>{this.approvalTypeForTime=e.data.CONFIG_DATA_VALUE})},ExpenseEdit:function(e){this.$router.push({path:"/Expenses/Add/"+e})}}},h=m,v=(a("51e6"),a("2877")),f=Object(v["a"])(h,s,i,!1,null,null,null);t["default"]=f.exports},"6ea4":function(e,t,a){"use strict";var s=a("0e25"),i=a.n(s);i.a},"9c20":function(e,t,a){var s=a("20bd");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("499e").default;i("ea212430",s,!0,{sourceMap:!1,shadowMode:!1})},"9d1d":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(" "+e._s(this.CommentHeader)+" ")]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.CloseExpenseComments()}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("Form",{ref:"CommentForm",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.valid,i=t.errors;return[1==e.visibility?a("div",{class:{"d-none":1==e.showModelClientCompany}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Title"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Title",rules:{required:!0},label:"Title"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.CommentTitle,expression:"CommentTitle"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{name:"Title",id:"Title",type:"text",maxlength:"100"},domProps:{value:e.CommentTitle},on:{input:function(t){t.target.composing||(e.CommentTitle=t.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Name"}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Description"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Description",rules:{required:!0},label:"Description"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Commentdesc,expression:"Commentdesc"}],class:{"form-control":!0,"is-invalid":s[0]},staticStyle:{"max-height":"300px!important","min-height":"100px!important"},attrs:{maxlength:"250",id:"description",name:"Description"},domProps:{value:e.Commentdesc},on:{input:function(t){t.target.composing||(e.Commentdesc=t.target.value)}}}),e._v(" "),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Name"}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1),1==e.access?a("div",{staticClass:"form-group"},[a("label",[e._v("Visibility:"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("div",{staticClass:"form-control pl-0 border-0"},[a("Field",{attrs:{name:"ReimburseBy",rules:{required:!0},label:"Reimburse By"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.SelectedVale,expression:"SelectedVale"}],attrs:{type:"radio",id:"Public",value:"Public",name:"Public"},domProps:{checked:e._q(e.SelectedVale,"Public")},on:{change:function(t){e.SelectedVale="Public"}}}),a("label",{staticClass:"form-check-label font-weight-normal ml-2",attrs:{for:"Client"}},[e._v(e._s(e.$t("Public")))])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.SelectedVale,expression:"SelectedVale"}],attrs:{type:"radio",id:"Private",value:"Private",name:"Company"},domProps:{checked:e._q(e.SelectedVale,"Private")},on:{change:function(t){e.SelectedVale="Private"}}}),a("label",{staticClass:"form-check-label font-weight-normal ml-2",attrs:{for:"Company"}},[e._v(e._s(e.$t("Private")))])]),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Name"}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1)]):e._e()]),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"row flex-row-reverse"},[1==e.isSingleCommentforMultipleExpenses?a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-danger mr-2",attrs:{title:"Skip",href:"javascript:;"},on:{click:function(t){return e.Skip(s,i)}}},[a("span",[e._v(e._s(e.$t("Skip")))]),a("em",{staticClass:"fa fa-forward pl-2"})]),a("a",{staticClass:"btn btn-success",attrs:{title:e.$t("PostNewComment"),href:"javascript:;"},on:{click:function(t){return e.APostNewComment(s,i)}}},[a("em",{staticClass:"fa fa-send pr-2"}),a("span",[e._v(e._s(e.$t("PostNewComment")))])])]):e._e(),0==e.isSingleCommentforMultipleExpenses?a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success",attrs:{id:"postcomment",title:e.$t("PostNewComment"),href:"javascript:;"},on:{click:function(t){return e.PostNewComment(s,i)}}},[a("em",{staticClass:"fa fa-send pr-2"}),e._v(e._s(e.$t("PostNewComment")))])]):e._e(),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("small",{staticClass:"text-danger mandatory"},[e._v(e._s(e.$t("MandatoryString")))])])])])])])]):e._e(),1==e.isSingleCommentforMultipleExpenses?a("div",[a("div",{staticClass:"col-lg-12"},[e.showModelClientCompany?a("div",{staticClass:"row"},[a("div",{staticClass:"w-100 col-12"},[a("div",{staticClass:"alert alert-warning mb-3"},[e._v(" "+e._s(e.$t("ExpenseEntryWillBeReimbursedBy"))+" ")]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("ReimburseBy"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("div",{staticClass:"form-control pl-0 border-0"},[a("Field",{attrs:{name:"ReimburseBy",rules:{required:!0},label:"Reimburse By"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.SelectedVale,expression:"SelectedVale"}],attrs:{type:"radio",id:"Client",value:"Client",name:"ReimburseBy"},domProps:{checked:e._q(e.SelectedVale,"Client")},on:{change:function(t){e.SelectedVale="Client"}}}),a("label",{staticClass:"form-check-label font-weight-normal ml-2",attrs:{for:"Client"}},[e._v(e._s(e.$t("Client")))])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.SelectedVale,expression:"SelectedVale"}],attrs:{type:"radio",id:"Company",value:"Company",name:"ReimburseBy"},domProps:{checked:e._q(e.SelectedVale,"Company")},on:{change:function(t){e.SelectedVale="Company"}}}),a("label",{staticClass:"form-check-label font-weight-normal ml-2",attrs:{for:"Company"}},[e._v(e._s(e.$t("Company")))])]),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Name"}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1)])]),a("div",{staticClass:"col-lg-12 text-right p-0"},[a("div",{staticClass:"search-btm-btn"},[a("a",{staticClass:"btn btn-success",attrs:{title:"submit",href:"javascript:;"},on:{click:function(t){return e.SubmitExpenseApproval(s,i,"Skip")}}},[a("i",{staticClass:"fa fa-save pr-2"}),e._v(e._s(e.$t("Submit")))])])])])]):e._e()])]):e._e()]}}])}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[0==e.isSingleCommentforMultipleExpenses?a("div",{staticClass:"listing"},[a("div",{staticClass:"w-100 activity-tab",attrs:{id:"Expenseaccordion"}},e._l(e.CommentExpenseData,(function(t,s){return a("div",{key:s,staticClass:"card"},[a("div",{staticClass:"card-header"},[a("a",{staticClass:"card-link collapsed",attrs:{"data-toggle":"collapse",href:"#Expensecollapse"+s}},[a("div",{staticClass:"conversation-date heading-border"},[a("span",[a("em",{staticClass:"pr-1",attrs:{"aria-hidden":"true"}}),e._v(e._s(t.groupKey))])])])]),a("div",{class:{collapse:!0,show:0==s},attrs:{id:"Expensecollapse"+s}},e._l(t.groupData,(function(s,i){return a("div",{key:i,staticClass:"card-body"},[1==s.EXPENSE_ACCESS?a("div",{staticClass:"conversation-main"},[a("div",{staticClass:"conversation-time"},[a("span",[e._v(e._s(e.$options.filters.formatTime(s.CREATED_AT)))])]),a("div",{staticClass:"conversation-box-con"},[a("div",{staticClass:"conversation-box"},[a("div",{staticClass:"name-circle light-yellow"},[a("img",{staticClass:"img-circle avatar",attrs:{src:e.blobUrl,width:"51",height:"51",alt:"Image"}})]),a("div",{staticClass:"conversation-header addednote-ticket"},[a("span",[a("span",{staticClass:"sender-name"},[e._v(e._s(s.EXPENSE_COMMENT_TITLE))]),a("span",{staticClass:"sender-department",attrs:{title:t.EXPENSE_COMMENT_DESC}},[e._v(" ("+e._s(s.EXPENSE_COMMENT_DESC)+")")])])]),a("div",{staticClass:"conversation-content"},[a("div",{staticClass:"col-12 p-0 notesdata"},[a("h6",{staticClass:"text-muted time"},[a("i",[a("b",[e._v(e._s(s.CREATED_BY))]),e._v(", "+e._s(e.$t("PostedOn"))+": "),a("span",{staticClass:"text-danger"},[e._v(e._s(e.$options.filters.formatDateTime(s.CREATED_AT)))])])])])])])])]):e._e(),0==s.EXPENSE_ACCESS?a("div",{staticClass:"conversation-main"},[a("div",{staticClass:"conversation-time"},[a("span",[e._v(e._s(s.CREATED_AT))])]),a("div",{staticClass:"conversation-box-con"},[a("div",{staticClass:"conversation-box"},[a("div",{staticClass:"name-circle light-yellow"},[a("img",{staticClass:"img-circle avatar",attrs:{src:e.blobUrl,width:"51",height:"51",alt:"Image"}})]),a("div",{staticClass:"conversation-header addednote-ticket"},[a("span",[a("span",{staticClass:"sender-department"},[e._v(" "+e._s(s.EXPENSE_COMMENT_DESC))])])]),a("div",{staticClass:"conversation-content"},[a("div",{staticClass:"col-12 p-0 notesdata"},[a("h6",{staticClass:"text-muted time"},[a("i",[a("b",[e._v(e._s(s.CREATED_BY))]),e._v(", "+e._s(e.$t("PostedOn"))+": "),a("span",{staticClass:"text-danger"},[e._v(e._s(s.CREATED_AT))])])])])])])])]):e._e()])})),0)])})),0)]):e._e(),e.noRecordForTab&&0==e.isSingleCommentforMultipleExpenses?a("div",{staticClass:"text-center text-danger border p-3 mt-4"},[e._v(e._s(e.$t("NoRecordfound")))]):e._e()])])],1)])])])])},i=[],n=a("9769"),o={props:{expenseid:{type:String,required:!0},CommentHeader:{type:String,required:!0},isSingleCommentforMultipleExpenses:{type:Number,required:!0},statuscode:{type:String,required:!0},visibility:{type:Number,required:!0},access:{type:Number,required:!0}},data:function(){return{isLoading:!1,CommentTitle:"",Commentdesc:"",Expense_Id:"",userid:"",usertype:"",CommentExpenseData:[],showModelClientCompany:!1,SelectedVale:"",objectPostString:"",noRecordForTab:!0,SkipParam:!1,containerName:null,avatar:"",blobUrl:""}},created:function(){this.userid=this.GetUserInfo.ID,this.usertype=this.GetUserInfo.UserType,this.containerName=this.GetUserInfo.ContainerName,this.CommentList(),this.GetBlobUrl()},updated:function(){this.CommentList(),this.GetBlobUrl()},methods:{GetBlobUrl:function(){n["a"].GetBlobUrl().then(e=>{var t=e.data[0].CONFIG_DATA_VALUE;null==this.avatar?this.blobUrl="/Content/images/DefaultImages/uc_user_new.jpg":this.blobUrl=t+"/"+this.containerName+"/Upload/UserProfileImage/"+this.avatar})},Skip:function(){this.showModelClientCompany=!0,this.CommentTitle="",this.Commentdesc="",this.SkipParam=!0},CloseExpenseComments:function(){this.$emit("CloseExpenseComments")},PostNewComment:function(e,t){var a=this;a.$refs.CommentForm.validate().then(e=>{if(e){var t={ExpenseCommentId:0,CommentTitle:a.CommentTitle,Commentdesc:a.Commentdesc,Expense_Id:a.expenseid,EXPENSE_ACCESS:1,StatusId:1001},s=JSON.stringify(t);n["a"].SaveComment(s).then((function(e){200==e.status&&(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Comments")]),"success",!0,a.$t("Alert")),a.noRecordForTab=!1,a.CommentTitle="",a.Commentdesc="",a.$refs.CommentForm.reset(),a.CommentList())}))}})},APostNewComment:function(e,t){var a=this;a.$refs.CommentForm.validate().then(e=>{a.$refs.CommentForm.errors.ReimburseBy.length>0&&(e=!0),a.$refs.CommentForm.errors.Description.length>0&&(e=!1),a.$refs.CommentForm.errors.Title.length>0&&(e=!1),e?"EXP_SEND_FOR_CORRECTION"==a.statuscode?(a.showModelClientCompany=!1,a.noRecordForTab=!1,a.SubmitExpenseApproval()):0==a.SkipParam&&(a.showModelClientCompany=!0):console.log(a.$refs.CommentForm.errors)})},CommentList:function(){var e=this;e.isLoading=!0;var t="id="+e.expenseid;n["a"].CommentsList(t).then((function(t){if(null!=t.data){e.CommentExpenseData=[];var a=t.data,s="";$.each(a,$.proxy((function(t,i){s=e.$options.filters.formatDate(i.CREATED_AT);var n=$.grep(e.CommentExpenseData,(function(e,t){return e.groupKey==s}));if(0==n.length){var o=$.grep(a,(function(t,a){return e.$options.filters.formatDate(t.CREATED_AT)==s}));if(o.length>0){var r={groupKey:s,groupData:o};e.CommentExpenseData.push(r),e.avatar=e.CommentExpenseData[0].groupData[0].avatar,e.noRecordForTab=!1}}}),this))}else e.noRecordForTab=!0,e.ExpenseData=[];e.ExpenseData=[],e.isLoading=!1}))},SubmitExpenseApproval:function(e,t,a){var s=this;s.$refs.CommentForm.validate().then(e=>{"Skip"==a?(s.$refs.CommentForm.errors.Description.length>0&&(e=!0),s.$refs.CommentForm.errors.Title.length>0&&(e=!0),s.$refs.CommentForm.errors.ReimburseBy.length>0&&(e=!1)):e=!0,e&&s.confirmR(s.$t("ExpenseApprove"),!0,s.$t("Delete")+"  "+s.$t("ExpenseApproval"),(function(){var e=`ids=${s.expenseid}&statusCode=${s.statuscode}&approvalTypeId=2&CommentTitle=${s.CommentTitle}&Commentdesc=${s.Commentdesc}&commentAccess=1&isForciable=0&isOverridable=0&reimburseBy=${s.SelectedVale}`;n["a"].AddApproverStatusListing(e).then((function(e){200==e.status&&("EXP_APPROVED"==s.statuscode?(s.$emit("CloseExpenseComments"),s.$emit("fetchdata"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='SendForReject']").removeClass("enable").addClass("disabled"),$("[id^='SendForApprove']").removeClass("enable").addClass("disabled"),s.ShowAlert(s.$t("ExpenseApproveReject",[s.$t("Approve")]),"success",!0,s.$t("Alert"))):"EXP_REJECTED"==s.statuscode?(s.$emit("CloseExpenseComments"),s.$emit("fetchdata"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='SendForReject']").removeClass("enable").addClass("disabled"),$("[id^='SendForApprove']").removeClass("enable").addClass("disabled"),s.ShowAlert(s.$t("ExpenseApproveReject",[s.$t("Decline")]),"success",!0,s.$t("Alert"))):(s.$emit("CloseExpenseComments"),s.$emit("fetchdata"),s.ShowAlert(s.$t("ExpenseApproveSendForCorrection",[s.$t("SendForCorrection")]),"success",!0,s.$t("Alert"))))}))}))})}}},r=o,l=a("2877"),c=Object(l["a"])(r,s,i,!1,null,null,null);t["a"]=c.exports},a090:function(e,t,a){"use strict";var s=a("9c20"),i=a.n(s);i.a},c9cb:function(e,t,a){var s=a("dca5");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("499e").default;i("49344702",s,!0,{sourceMap:!1,shadowMode:!1})},cc50:function(e,t,a){var s=a("24fb");t=s(!1),t.push([e.i,"#ExpenseAttechment .file-upload{justify-content:flex-start!important}#ExpenseAttechment .file-upload .file-upload__area{overflow:auto!important;flex-wrap:wrap;height:200px}#ExpenseAttechment .file-upload .upload-preview{text-align:center;width:30%;margin:auto;padding-bottom:20px}#ExpenseAttechment .file-upload .upload-preview .file-image{width:100%;height:auto;-o-object-fit:contain;object-fit:contain}",""]),e.exports=t},dca5:function(e,t,a){var s=a("24fb");t=s(!1),t.push([e.i,".dashbord-widget i{float:right;font-size:35px;color:#8b9197}.bg-orange{background-color:#fe6847}.expense-card .custom-control{top:0;left:4px}",""]),e.exports=t},e97a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"main-content",attrs:{id:"main-content"}},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("section",{staticClass:"page-action"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 padding-t_8"},[a("div",{staticClass:"theme-primary partition-full"},[a("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("BulkUpload")))]),a("span",{staticClass:"p-actions float-right"},[a("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",id:"PageTour",title:"Page Tour"},on:{click:function(t){return e.setTourGuideSteps(0)}}},[a("i",{staticClass:"fa fa-road",attrs:{"aria-hidden":"true"}}),a("br"),e._v("Page Tour")])])])])])]),a("div",{staticClass:"user-guide-custom d-none"},[e._v(" "+e._s(e.$t("User_Guide_ExpenseImport"))+" ")]),e.filepath?e._e():a("div",{staticClass:"border p-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("DownloadSampleFile"))+":")]),a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"form-control"},[a("i",{staticClass:"fa fa-file-excel-o pr-1 text-success"}),e._v(e._s(e.$t("Expense"))+".xls ")]),e._m(0)])])]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("UploadaFile"))+":"),a("span",{staticClass:"text-danger"})]),a("div",{staticClass:"input-group"},[a("div",{staticClass:"custom-file expenseFile"},[a("input",{staticStyle:{position:"absolute",clip:"rect(0px, 0px, 0px, 0px)"},attrs:{type:"file",name:"FileSrc",id:"flAvatar",multiple:"true",tabindex:"-1"},on:{change:function(t){return e.setFile(t)}}}),a("div",{staticClass:"bootstrap-filestyle input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.attachmentName,expression:"attachmentName"}],staticClass:"form-control disabled",attrs:{type:"text",disabled:""},domProps:{value:e.attachmentName},on:{input:function(t){t.target.composing||(e.attachmentName=t.target.value)}}}),a("div",{staticClass:"input-group-append",staticStyle:{cursor:"pointer"}},[a("span",{staticClass:"group-span-filestyle input-group-btn input-group-text bg-white",attrs:{tabindex:"0"}},[a("label",{staticClass:"mb-0 font-weight-normal ",attrs:{title:"Click here to select a file.",for:"flAvatar"}},[e._v(e._s(e.$t("FileControlText")))])]),a("span",{staticClass:"input-group-text border-0 bg-transparent p-0 pl-2"},[a("a",{staticClass:"round-icon-small btn-danger-light",attrs:{href:"javascript:;",title:"Clear"},on:{click:e.Clear}},[a("i",{staticClass:"fa fa-undo"})])])])])])])])])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-info formbtn mr-1",attrs:{href:"javascript:void(0);",title:e.$t("ImportFromExcelFile")},on:{click:function(t){return e.UploadExpenseFile()}}},[a("i",{staticClass:"fa fa-file-excel-o mr-2"}),e._v(e._s(e.$t("ImportFromExcelFile")))]),a("RouterLink",{staticClass:"btn btn-danger formbtn widthhalf",attrs:{to:"/Expenses/Index",title:"Cancel",tabindex:"4"}},[a("i",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel")))])],1)])]),e.filepath&&e.filepath.length>0?a("ImportExpenseDeatils",{attrs:{path:e.filepath}}):e._e()],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-append downloadExpense"},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[a("a",{attrs:{href:"/Content/files/Expense.xls",download:""}},[a("i",{staticClass:"fa fa-download text-primary"})])])])}],n=(a("5319"),a("9769")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"main-content",attrs:{id:"divMainListData"}},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("section",{staticClass:"main-content"},[a("div",{staticClass:"container-fluid padding-t_8"},[a("div",{staticClass:"col-12 mb-2 p-0"},[a("div",{staticClass:"mr-2 d-inline-block mt-2"},[a("span",{staticClass:"legend-valid colorboxsquare"}),e._v(" "+e._s(e.$t("Valid"))+" ")]),a("div",{staticClass:"mr-2 d-inline-block mt-2"},[a("span",{staticClass:"legend-expenselimit colorboxsquare"}),e._v(e._s(e.$t("PerDayExpenseExceeded"))+" ")]),a("div",{staticClass:"mr-2 d-inline-block mt-2"},[a("span",{staticClass:"legend-totalexpenselimit colorboxsquare"}),e._v(" "+e._s(e.$t("ExpenseLimitExceeded"))+" ")])]),a("div",{staticClass:"col-md-12 p-0",attrs:{id:"divShowlistingData"}},[a("div",{staticClass:"listing"},[a("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.valid,i=t.errors;return[a("div",{staticClass:"table-responsive",staticStyle:{"min-height":"415px"}},[a("table",{staticClass:"sortable bulkexpense table table-bordered dt-responsive nowrap mt-0",attrs:{id:"tblExpList"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{style:{width:12*e.$t("ExpenseDate").length+100+"px"}},[a("span",{style:{"min-width":12*e.$t("ExpenseDate").length+100+"px"}},[e._v(e._s(e.$t("ExpenseDate")))])]),a("th",{style:{width:12*e.$t("Trip").length+100+"px"}},[a("span",{style:{width:12*e.$t("Trip").length+100+"px"}},[e._v(e._s(e.$t("Trip")))])]),a("th",{style:{width:12*e.$t("ExpenseTitle").length+100+"px"}},[a("span",{style:{width:12*e.$t("ExpenseTitle").length+100+"px"}},[e._v(e._s(e.$t("expense_title")))])]),a("th",{style:{width:12*e.$t("Category").length+100+"px"}},[a("span",{style:{width:12*e.$t("Category").length+100+"px"}},[e._v(e._s(e.$t("Category")))])]),a("th",{style:{width:12*e.$t("Project").length+100+"px"}},[a("span",{style:{width:12*e.$t("Project").length+100+"px"}},[e._v(e._s(e.$t("Project")))])]),a("th",{style:{width:12*e.$t("Currency").length+100+"px"}},[a("span",{style:{width:12*e.$t("Currency").length+100+"px"}},[e._v(e._s(e.$t("Currency")))])]),a("th",{style:{width:12*e.$t("Task").length+100+"px"}},[a("span",{style:{width:12*e.$t("Task").length+100+"px"}},[e._v(e._s(e.$t("Task")))])]),a("th",{style:{width:12*e.$t("Amount").length+100+"px"}},[a("span",{style:{width:12*e.$t("Amount").length+100+"px"}},[e._v(e._s(e.$t("Amount")))])]),a("th",{style:{width:12*e.$t("Description").length+100+"px"}},[a("span",{style:{width:12*e.$t("Description").length+100+"px"}},[e._v(e._s(e.$t("Description")))])]),a("th",{style:{width:12*e.$t("Attachment").length+100+"px"}},[a("span",{style:{width:12*e.$t("Attachment").length+100+"px"}},[e._v(e._s(e.$t("Attachment")))])])])]),a("tbody",[null==e.expListing?a("tr",[a("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"8"}},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")])]):e._e(),e._l(e.expListing,(function(t,s){return a("tr",{key:s,staticClass:"seletedrow"},[a("td",{staticStyle:{overflow:"visible!important"}},[a("div",{staticClass:"input-group"},[a("Field",{attrs:{rules:{required:!0},name:"datepicker"+s},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.errors,o=i.changed;return[a("v-date-picker",{staticClass:"input-group",attrs:{name:"datepicker"+s,"minute-increment":5},on:{"update:modelValue":o},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,i=t.inputEvents,o=t.togglePopover;return[a("input",e._g({class:{"form-control":!0,"is-invalid":n[0]},attrs:{placeholder:"HH:MM:YYYY"},domProps:{value:s}},i)),a("div",{staticClass:"input-group-append",on:{click:function(e){return o()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.expenseDate,callback:function(a){e.$set(t,"expenseDate",a)},expression:"item.expenseDate"}}),n[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"datepicker"+s}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1)]),a("td",[a("Field",{attrs:{rules:{required:!0},name:"tripId"+s},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.tripId,expression:"item.tripId"}],class:{"form-control":!0,"is-invalid":n[0]},attrs:{name:"tripId"+s},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"tripId",a.target.multiple?s:s[0])}}},[a("option",{attrs:{value:""}},[e._v("Select Trip")]),e._l(e.trips,(function(t,s){return a("option",{key:s,domProps:{value:String(t.triP_ID)}},[e._v(e._s(t.triP_NAME))])}))],2),n[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"tripId"+s}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1),a("td",[a("Field",{attrs:{rules:{required:!0},name:"expenseTitle"+s},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.expenseTitle,expression:"item.expenseTitle"}],class:{"form-control":!0,"is-invalid":n[0]},attrs:{name:"expenseTitle"+s,type:"text"},domProps:{value:t.expenseTitle},on:{input:function(a){a.target.composing||e.$set(t,"expenseTitle",a.target.value)}}}),n[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"expenseTitle"+s}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1),a("td",{staticClass:"cat"},[a("Field",{attrs:{rules:{required:!0},name:"categoryId"+s},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.categoryId,expression:"item.categoryId"}],class:{"form-control":!0,"is-invalid":n[0]},attrs:{name:"categoryId"+s},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"categoryId",a.target.multiple?s:s[0])}}},[a("option",{attrs:{value:""}},[e._v("Default")]),e._l(e.categories,(function(t,s){return a("option",{key:s,domProps:{value:String(t.expensE_CATEGORY_ID)}},[e._v(e._s(t.categorY_NAME))])}))],2),n[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"categoryId"+s}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1),a("td",{staticClass:"pro"},[a("Field",{attrs:{rules:{required:!0},name:"projectId"+s},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.projectId,expression:"item.projectId"}],class:{"form-control":!0,"is-invalid":n[0]},attrs:{name:"projectId"+s},on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"projectId",a.target.multiple?s:s[0])},function(a){return e.GetTaskByProject(a,t)}]}},[a("option",{attrs:{value:""}},[e._v("Please Select Project")]),e._l(e.projects,(function(t,s){return a("option",{key:s,domProps:{value:t.projectId}},[e._v(e._s(t.projectName))])}))],2),n[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"projectId"+s}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1),a("td",{staticClass:"cur"},[a("Field",{attrs:{rules:{required:!0},name:"currencyId"+s},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.currencyId,expression:"item.currencyId"}],class:{"form-control":!0,"is-invalid":n[0]},attrs:{name:"currencyId"+s},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"currencyId",a.target.multiple?s:s[0])}}},[a("option",{attrs:{value:""}},[e._v("Select Currency")]),e._l(e.currencies,(function(t,s){return a("option",{key:s,domProps:{value:String(t.currencyId)}},[e._v(e._s(t.currency))])}))],2),n[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"currencyId"+s}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1),a("td",[a("Field",{attrs:{name:"Task"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.taskId,expression:"item.taskId"}],class:{"form-control":!0},attrs:{name:"taskId"+s},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"taskId",a.target.multiple?s:s[0])}}},[a("option",{attrs:{value:""}},[e._v("Select Task")]),e._l(t.tasks,(function(t,s){return a("option",{key:s,domProps:{value:String(t.task_id)}},[e._v(e._s(t.task_name))])}))],2)])],1),a("td",[a("Field",{attrs:{rules:{required:!0},name:"expenseAmount"+s},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.expenseAmount,expression:"item.expenseAmount"}],class:{"form-control amt":!0,"is-invalid":n[0]},attrs:{name:"expenseAmount"+s,type:"text"},domProps:{value:t.expenseAmount},on:{input:function(a){a.target.composing||e.$set(t,"expenseAmount",a.target.value)}}}),n[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"expenseAmount"+s}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1),a("td",[a("Field",{attrs:{rules:{required:!0},name:"description"+s},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"item.description"}],class:{"form-control":!0,"is-invalid":n[0]},attrs:{name:"description"+s,cols:"5",maxlength:"225"},domProps:{value:t.description},on:{input:function(a){a.target.composing||e.$set(t,"description",a.target.value)}}}),e._v(" "),n[0]?a("span",{staticClass:"invalid-feedback"},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1),a("td",[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[a("div",{staticClass:"col-lg-12 float-left"},[a("div",{staticClass:"form-group mb-1"},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"custom-file"},[a("input",{staticStyle:{position:"absolute",clip:"rect(0px, 0px, 0px, 0px)"},attrs:{type:"file",name:"FileSrc"+s,id:"flFile"+s,multiple:"true",tabindex:"-1"},on:{change:function(t){return e.setFile(s,t)}}}),a("div",{staticClass:"bootstrap-filestyle input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attachmentName,expression:"item.attachmentName"}],staticClass:"form-control disabled",attrs:{type:"text",disabled:""},domProps:{value:t.attachmentName},on:{input:function(a){a.target.composing||e.$set(t,"attachmentName",a.target.value)}}}),a("div",{staticClass:"input-group-append",staticStyle:{cursor:"pointer"}},[a("span",{staticClass:"group-span-filestyle input-group-btn input-group-text bg-white",attrs:{tabindex:"0"}},[a("label",{staticClass:"mb-0 font-weight-normal ",attrs:{title:"Click here to select a file.",for:"flFile"+s}},[e._v(e._s(e.$t("FileControlText")))])]),a("span",{staticClass:"input-group-text border-0 bg-transparent p-0 pl-2"})])])])])])])])])])}))],2)])]),a("div",{staticClass:"text-right mt-3"},[null!=e.expListing?a("a",{staticClass:"btn btn-warning mr-1",attrs:{id:"aValidate",href:"javascript:void(0);",title:e.$t("ValidateExpenseList")},on:{click:function(t){return e.ValidateExpense(s,i)}}},[a("i",{staticClass:"fa fa-list pr-2"}),e._v(e._s(e.$t("ValidateExpenseList")))]):e._e(),null!=e.expListing?a("a",{staticClass:"btn btn-success hidden mr-1",attrs:{id:"aEdit",href:"javascript:;",title:e.$t("Edit")},on:{click:e.ExpenseEdit}},[a("i",{staticClass:"fa fa-save pr-2"}),e._v(e._s(e.$t("Edit")))]):e._e(),null!=e.expListing?a("a",{staticClass:"btn btn-success hidden mr-1",attrs:{id:"aSubmit",href:"javascript:void(0);",title:e.$t("ConfirmSubmit")},on:{click:e.OnSubmitExpense}},[a("i",{staticClass:"fa fa-save pr-2"}),e._v(e._s(e.$t("ConfirmSubmit")))]):e._e(),a("a",{staticClass:"btn btn-danger mr-1",attrs:{href:"javascript:void(0)",title:e.$t("Cancel")},on:{click:e.onCancel}},[a("i",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel")))])])]}}])})],1)])])])],1)},r=[],l={props:{path:null},data:function(){return{isLoading:!1,expLimitJsonBack:[],check_EXPENSE_LIMIT:!1,userDateFormat:null,value:null,expListing:[],trips:[],categories:[],projects:[],currencies:[]}},created:async function(){this.userDateFormat=this.GetUserInfo.DateFormat,await this.UploadExpenseDetails()},methods:{async UploadExpenseDetails(){var e=this,t="fullPath="+e.path;e.isLoading=!0,await n["a"].UploadExpenseDetails(t).then((function(t){if(e.isLoading=!1,"success"==t.data.msgFor){var a=t.data;a.listing.forEach((function(e){e.tasks=[],"undefined"!=typeof e.projectId&&null!=e.projectId&&0!=e.projectId||(e.projectId=""),"undefined"!=typeof e.tripId&&null!=e.tripId&&0!=e.tripId||(e.tripId=""),"undefined"!=typeof e.taskId&&null!=e.taskId&&0!=e.taskId||(e.taskId=""),"undefined"!=typeof e.categoryId&&null!=e.categoryId&&0!=e.categoryId||(e.categoryId="")})),e.expListing=a.listing,e.expListing.forEach(e=>{e.attachmentName="",e.attachmentFiles=[],e.tasks=[]}),e.trips=a.Trips,e.projects=a.Projects,e.trips=a.Trips,e.categories=a.Categories,e.projects=a.Projects,e.currencies=a.Currencies}}))},updateFileInputUI(){this.$set(this.expListing,this.expListing.length,JSON.parse(JSON.stringify(this.expListing)))},ExpenseEdit:function(){$("#aValidate").removeClass("hidden"),$("#aEdit,#aSubmit").addClass("hidden")},onCancel:function(){this.$router.push({name:"Expense"})},setFile:function(e,t){var a=this;for(let s=0;s<t.target.files.length;s++){const i=t.target.files[s];a.expListing[e].attachmentFiles.push(i),a.expListing[e].attachmentName=i.name+" "}},Clear:function(e){e.attachmentName="",e.attachmentFiles=[],e.attachmentList=[]},GetTaskByProject(e,t){var a=$(e.target).val(),s="projectId="+a;n["a"].GetTaskByProject(s).then((function(e){t.tasks=e.data}))},ConvertToDate(e){var t=this.userDateFormat,a="M/d/yyyy";try{a=Sys.CultureInfo.CurrentCulture.dateTimeFormat.ShortDatePattern}catch(i){}var s=e.split("/");switch(t){case"MM/dd/yyyy":switch(a){case"M/d/yyyy":return new Date(s[0]+"/"+s[1]+"/"+s[2]);default:return new Date(s[1]+"/"+s[0]+"/"+s[2])}case"dd/MM/yyyy":switch(a){case"M/d/yyyy":return new Date(s[1]+"/"+s[0]+"/"+s[2]);default:return new Date(s[0]+"/"+s[1]+"/"+s[2])}default:break}return new Date(s[0]+"/"+s[1]+"/"+s[2])},ValidateExpense(e,t){var a=this;a.$refs.form.validate().then(e=>{e&&($("#aValidate").addClass("hidden"),$("#aEdit,#aSubmit").removeClass("hidden"),a.check_EXPENSE_LIMIT=!1,a.GetExpLimitJson(),setTimeout(()=>{a.CheckFile()},1e3))})},GetExpLimitJson(){var e=this;n["a"].GetExpenseLimitAvailableAmount().then((function(t){e.expLimitJsonBack=t.data,e.RowAmtValidation()}))},RowAmtValidation(){var e=!0,t=this;return $("#tblExpList tr.seletedrow").each((function(a,s){var i=$(s).find(".cat select").val(),n=$(s).find(".pro select").val(),o=$(s).find(".pro select :selected").text(),r=$(s).find(".cur select").val(),l=$(s).find("input.date").val(),c=$(s).find("input.amt").val(),d=new Date;if(void 0==i&&(i=$(s).find(".cat input[type=hidden]").val()),void 0==n&&(n=$(s).find(".pro input[type=hidden]").val()),void 0==r&&(r=$(s).find(".cur input[type=hidden]").val()),""==i||""==n||""==r)return!1;if(void 0!=l){if(""==l)return!1;d=t.ConvertToDate(l)}$.each(t.expLimitJsonBack,(function(a,l){l.CURRENCY_ID==r&&l.PROJECT_ID==n&&l.EXPENSE_CATEGORY_ID==i&&new Date(parseInt(l.EXPENSE_LIMIT_FROM.replace("/Date(","")))<=d&&d<new Date(parseInt(l.EXPENSE_LIMIT_TO.replace("/Date(","")))&&(null!=l.EXPENSE_PER_DAY&&parseFloat(c)>parseFloat(l.EXPENSE_PER_DAY)?($(s).removeClass("medium-bar"),$(s).removeClass("high-profile-bar"),$(s).addClass("high-bar"),t.ShowAlert(t.$t("PerDayExpenseLimit",[l.EXPENSE_PER_DAY,o]),"warning",!0,t.$t("Alert")),t.check_EXPENSE_LIMIT=!0,e=!1):0==l.EXPENSE_OVER_LIMIT?parseFloat(l.MAX_AMT)-parseFloat(c)<0?($(s).removeClass("medium-bar"),$(s).removeClass("high-bar"),$(s).addClass("high-profile-bar"),t.ShowAlert(t.$t("TotalExpenseLimit",[l.EXPENSE_MAX,o]),"warning",!0,t.$t("Alert")),t.check_EXPENSE_LIMIT=!0,e=!1):(l.MAX_AMT=parseFloat(l.MAX_AMT)-parseFloat(c),$(s).removeClass("high-profile-bar"),$(s).removeClass("high-bar"),$(s).addClass("medium-bar"),e=!0):($(s).removeClass("high-profile-bar"),$(s).removeClass("high-bar"),$(s).addClass("medium-bar")))})),1==e&&($(s).removeClass("high-profile-bar"),$(s).removeClass("high-bar"),$(s).addClass("medium-bar"))})),t.check_EXPENSE_LIMIT},onChangeFile(e){this.files.append("file",e[0],e[0].name)},CheckFile(){var e=this;e.isLoading=!0;const t=this.files;n["a"].CheckFileSizeAndType(t).then((function(t){e.isLoading=!1}))},OnSubmitExpense(){var e=this;e.$refs.form.validate().then(t=>{if(t&&!e.check_EXPENSE_LIMIT){var a=[];const t=new FormData;e.expListing.forEach((e,s)=>{var i={},n="fileRefNo"+s;i["fileRefNo"]=n,i["ExpenseTitle"]=e.expenseTitle,i["TripId"]=e.tripId?String(e.tripId):"0",i["ExpenseDate"]=e.expenseDate,i["CategoryId"]=e.categoryId?String(e.categoryId):"0",i["ProjectId"]=e.projectId?String(e.projectId):"0",i["CurrencyId"]=e.currencyId?String(e.currencyId):"0",i["TaskId"]=e.taskId?String(e.taskId):"0",i["ExpenseAmount"]=e.expenseAmount?String(e.expenseAmount):"0",i["Description"]=e.description,i["IsBulkUpload"]=1,a.push(i);for(var o=0;o<e.attachmentFiles.length;o++){let a=e.attachmentFiles[o];t.append(n+"_files["+o+"]",a)}}),t.append("postString",JSON.stringify(a)),n["a"].SaveExpenseBulk(t).then((function(t){e.isLoading=!1,200==t.status?(e.ShowAlert(e.$t("ExpenseAdd",[e.$t("Expense")]),"success",!0,e.$t("Alert")),e.$router.push({name:"Expense"})):e.ShowAlert(e.$t("AddedError",[e.$t("Expense")]),"warning",!0,e.$t("Alert"))}))}})}}},c=l,d=a("2877"),p=Object(d["a"])(c,o,r,!1,null,null,null),u=p.exports,m={components:{ImportExpenseDeatils:u},data:function(){return{isLoading:!1,file:null,filepath:null,excelFileName:null,files:new FormData,value:null,attachmentName:""}},methods:{setFile:function(e){this.attachmentName=e.target.files[0].name,this.file=e.target.files[0],this.excelFileName=e.target.files[0].name},Clear:function(){this.attachmentName=""},UploadExpenseFile(){var e=this;if(""!=$("#flAvatar").val()){var t=$("#flAvatar").val().split("\\").pop(),a=".xls,.xlsx",s=t.replace(/^.*\./,"");if(a.includes(s)){const t=new FormData;t.append("file",e.file),e.isLoading=!0,n["a"].ImportExpensePost(t).then((function(t){e.isLoading=!1;var a=t.data;0==a.Status?e.filepath=a.Msg:e.ShowAlert(a.Msg,"warning",!0,e.$t("Alert"))}))}else e.ShowAlert(e.$t("InvalidSampleFileUploadMsg",[t,a]),"warning",!0,e.$t("Alert"))}else e.ShowAlert(e.$t("PleaseUploadExcelFile"),"warning",!0,e.$t("Alert"))}}},h=m,v=Object(d["a"])(h,s,i,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=Expense.js.map